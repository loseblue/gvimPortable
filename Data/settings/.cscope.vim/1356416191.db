cscope 15 D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src"               0000123395
	@D:\Projects\modem2.5g\branches\protocol\INTEGR~1\navi\test\stack\MICRO_~1\mmi\src\MMI_CA~2.MIN

28 
	~"sxr_›s.h
"

29 
	~"sxs_lib.h
"

30 
	~"sxs_io.h
"

33 
	~"mmi_msg.h
"

34 
	~"ôf_msg.h
"

35 
	~"°t.h
"

36 
	~"mmi_d©a.h
"

37 
	~"mmi_ˇŒ.h
"

39 
u8
 
CurTI
;

40 
u8
 
ApiTIFœg
;

43 
	#RADIO_CHAN_REQ_RESERVED
 0

	)

44 
	#RADIO_CHAN_REQ_FULL_RATE_ONLY
 1

	)

45 
	#RADIO_CHAN_REQ_DUAL_RATE_HALF_PREFER
 2

	)

46 
	#RADIO_CHAN_REQ_DUAL_RATE_FULL_PREFER
 3

	)

49 
	#INFO_TRANS_CAP_SPEECH
 0

	)

50 
	#INFO_TRANS_CAP_DIG
 1

	)

51 
	#INFO_TRANS_CAP_RESERVED
 7

52 

	)

54 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V1
 0

55 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V2
 2

56 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V3
 4

57 
	#SPEECH_VER_IND_HALF_RATE_SPEECH_V1
 1

58 
	#SPEECH_VER_IND_HALF_RATE_SPEECH_V3
 5

59 
	#SPEECH_VER_IND_NO_SPEECH_VERSION
 0xF

60 

	)

62 
	#M_GET_PF
(
_BCHódî
Ë((*(((
u8
 *)_BCHódî)+1)&0x10Ë>> 4)

	)

64 
	#M_SET_EXT
(
_BCHódî
, 
_byã
Ë*((
u8
 *)_BCHódî+_byãË|(1 << 7)

	)

66 
	#M_SET_NO_EXT
(
_BCHódî
, 
_byã
Ë*((
u8
 *)_BCHódî+_byãË&0x7f

	)

68 
	#M_SET_RADIO_CHAN_REQ
(
_BCHódî
,
_vÆue
Ë(*(
u8
 *)_BCHódîË|((_vÆueË<< 5)

	)

70 
	#M_SET_INFO_TRANS_CAP
(
_BCHódî
,
_vÆue
Ë(*(
u8
 *)_BCHódîË|(_vÆue)

	)

72 
	#M_SET_SPEECH_VER_IND
(
_BCHódî
,
_vÆue
Ë*((
u8
 *)_BCHódî+1Ë|(_vÆue)

	)

83 
boﬁ
 
	$mmiSëupReqBóªrC≠Së
(
≠i_CcSëupReq_t
 *
CcSëupReq
)

85 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set start\n");

86 if(!
CcSëupReq
->
Bóªr1
)

88 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set without BearerCap\n");

89  
FALSE
;

93 
	`mem£t
(
CcSëupReq
->
Bóªr1
, 0, 14);

94 
	`M_SET_EXT
(
CcSëupReq
->
Bóªr1
, 0);

95 
	`M_SET_RADIO_CHAN_REQ
(
CcSëupReq
->
Bóªr1
, 
RADIO_CHAN_REQ_FULL_RATE_ONLY
);

96 
	`M_SET_INFO_TRANS_CAP
(
CcSëupReq
->
Bóªr1
, 
INFO_TRANS_CAP_SPEECH
);

97 
	`M_SET_NO_EXT
(
CcSëupReq
->
Bóªr1
, 1);

99 
	`M_SET_SPEECH_VER_IND
(
CcSëupReq
->
Bóªr1
, 
SPEECH_VER_IND_FULL_RATE_SPEECH_V1
);

100 
CcSëupReq
->
Bóªr1Lí
 = 2;

102 
CcSëupReq
->
Bóªr2Lí
 = 0;

104 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcSëupReq
->
Bóªr1
, CcSëupReq->
Bóªr1Lí
);

105  
TRUE
;

106 
	}
}

118 
boﬁ
 
	$mmiSëupReqHÆfR©eBóªrC≠Së
(
≠i_CcSëupReq_t
 *
CcSëupReq
)

120 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqHalfRateBearerCapSet Set start\n");

121 if(!
CcSëupReq
->
Bóªr1
)

123 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqHalfRateBearerCapSet Set without BearerCap\n");

124  
FALSE
;

128 
	`mem£t
(
CcSëupReq
->
Bóªr1
, 0, 14);

129 
	`M_SET_NO_EXT
(
CcSëupReq
->
Bóªr1
, 0);

130 
	`M_SET_RADIO_CHAN_REQ
(
CcSëupReq
->
Bóªr1
, 
RADIO_CHAN_REQ_DUAL_RATE_HALF_PREFER
);

131 
	`M_SET_NO_EXT
(
CcSëupReq
->
Bóªr1
, 1);

132 
	`M_SET_SPEECH_VER_IND
(
CcSëupReq
->
Bóªr1
, 
SPEECH_VER_IND_HALF_RATE_SPEECH_V1
);

133 
CcSëupReq
->
Bóªr1Lí
 = 2;

135 
CcSëupReq
->
Bóªr2Lí
 = 0;

137 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcSëupReq
->
Bóªr1
, CcSëupReq->
Bóªr1Lí
);

138  
TRUE
;

139 
	}
}

151 
boﬁ
 
	$mmiD©aSëupReqBóªrC≠Së
(
≠i_CcSëupReq_t
 *
CcSëupReq
)

153 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set start\n");

154 if(!
CcSëupReq
->
Bóªr1
)

156 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiDataSetupReqBearerCapSet Set without BearerCap\n");

157  
FALSE
;

161 
	`mem£t
(
CcSëupReq
->
Bóªr1
, 0, 14);

162 
	`M_SET_EXT
(
CcSëupReq
->
Bóªr1
, 0);

163 
	`M_SET_RADIO_CHAN_REQ
(
CcSëupReq
->
Bóªr1
, 
RADIO_CHAN_REQ_FULL_RATE_ONLY
);

164 
	`M_SET_INFO_TRANS_CAP
(
CcSëupReq
->
Bóªr1
, 
INFO_TRANS_CAP_SPEECH
);

165 
	`M_SET_NO_EXT
(
CcSëupReq
->
Bóªr1
, 1);

167 
	`M_SET_SPEECH_VER_IND
(
CcSëupReq
->
Bóªr1
, 
SPEECH_VER_IND_FULL_RATE_SPEECH_V1
);

168 
CcSëupReq
->
Bóªr1Lí
 = 2;

170 
CcSëupReq
->
Bóªr2Lí
 = 0;

172 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcSëupReq
->
Bóªr1
, CcSëupReq->
Bóªr1Lí
);

173  
TRUE
;

174 
	}
}

185 
boﬁ
 
	$mmiCÆlC⁄fúmedBóªrC≠Së
(
≠i_CcCÆlC⁄fReq_t
 *
CcCÆlC⁄fReq
)

187 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiCallConfirmedBearerCapSet Set start\n");

188 if(!
CcCÆlC⁄fReq
->
Bóªr1
)

190 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set without BearerCap\n");

191  
FALSE
;

195 
	`mem£t
(
CcCÆlC⁄fReq
->
Bóªr1
, 0, 14);

196 
	`M_SET_EXT
(
CcCÆlC⁄fReq
->
Bóªr1
, 0);

197 
	`M_SET_RADIO_CHAN_REQ
(
CcCÆlC⁄fReq
->
Bóªr1
, 
RADIO_CHAN_REQ_FULL_RATE_ONLY
);

198 
	`M_SET_INFO_TRANS_CAP
(
CcCÆlC⁄fReq
->
Bóªr1
, 
INFO_TRANS_CAP_SPEECH
);

199 
	`M_SET_NO_EXT
(
CcCÆlC⁄fReq
->
Bóªr1
, 1);

200 
	`M_SET_SPEECH_VER_IND
(
CcCÆlC⁄fReq
->
Bóªr1
, 
mmi_D©a
.
ßp_SèckCfg
->
Ch™ModeSuµ‹t
);

201 
CcCÆlC⁄fReq
->
Bóªr1Lí
 = 2;

203 
CcCÆlC⁄fReq
->
Bóªr2Lí
 = 0;

205 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcCÆlC⁄fReq
->
Bóªr1
, CcCÆlC⁄fReq->
Bóªr1Lí
);

206  
TRUE
;

207 
	}
}

219 
	$mmiSëupReq
 ( 
u8
* 
ph⁄e_numbî
 )

221 
Msg_t
 * 
MsgPå
 ;

222 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcSëupReq_t
 );

223 
u8
 
ph⁄e_num
[10];

224 
u8
 
i
 ;

225 
u8
 
num_Àn
 = 
	`°æí
–
ph⁄e_numbî
 ) ;

226 
u8
 
Ty≥
 = 
API_CC_REGULAR_CALL
 ;

227 
boﬁ
 
IsHR
 = 
FALSE
;

229 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, 
ph⁄e_numbî
 ) ;

230 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
|
	`TNB_ARG
(4), " %x %x %x %x", 
ph⁄e_numbî
[0],Öhone_number[1],

231 
ph⁄e_numbî
[2],phone_number[3]);

233 
i
=0;i<(
num_Àn
+1)/2;i++)

235 
ph⁄e_num
[
i
]=(
ph⁄e_numbî
[2*i] & 0xf) | ((phone_number[2*i+1] & 0xf )<<4);

237 i‡–
num_Àn
 & 1 )

239 
ph⁄e_num
[
i
-1] |= 0xf0;

243 i‡–((
ph⁄e_numbî
[0] & 0x0f) == 1) && ((phone_number[1] & 0x0f) == 1) &&

244 ((
ph⁄e_numbî
[2] & 0x0f) == 2) )

246 
Ty≥
 = 
API_CC_EMERGENCY_CALL
;

247 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "emergency call\n");

250 i‡–((
ph⁄e_numbî
[0] & 0x0f) == 2) && ((phone_number[1] & 0x0f) == 2) &&

251 (
num_Àn
 == 2) )

252 
IsHR
 = 
TRUE
;

254 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

255 
MsgPå
->
H
.
Id
 = 
API_CC_SETUP_REQ
 ;

257 
CurTI
 = 0;

258 
ApiTIFœg
 = 0;

260 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆlTy≥
 = 
Ty≥
;

261 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRSuµªssi⁄
 = 
FALSE
 ;

262 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRInvoˇti⁄
 = 
FALSE
 ;

263 
MsgPå
->
B
.
ApiCcSëupReq
.
CPSALí
 = 0 ;

265 
MsgPå
->
B
.
ApiCcSëupReq
.
U£rU£rLí
 = 0 ;

267 i‡–
Ty≥
 =
API_CC_REGULAR_CALL
 )

270 i‡–
IsHR
 )

272 
	`mmiSëupReqHÆfR©eBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

276 
	`mmiSëupReqBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

281 i‡–
ph⁄e_num
[0] == 0 )

283 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
,"international call\n");

284 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = 0x91;

285 
	`mem˝y
–&
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], &
ph⁄e_num
[1],

286 (
num_Àn
)/2 );

287 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
)/2;

289 i‡–(
ph⁄e_num
[0] == 0x10) && ((phone_num[1] & 0x0F) == 0x01) )

292 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "international call 011\n");

293 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = 0x91;

295 
i
=0;i<(
num_Àn
-2)/2;i++)

297 
ph⁄e_num
[
i
](
ph⁄e_numbî
[2*i+3] & 0xf) |

298 ((
ph⁄e_numbî
[2*
i
+4] & 0xf )<<4);

300 i‡–!(
num_Àn
 & 1) )

302 
ph⁄e_num
[
i
-1] |= 0xf0;

304 
	`mem˝y
–&
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 
ph⁄e_num
,

305 (
num_Àn
)/2 );

306 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
-2)/2;

307 
	`sxs_Dump
–
_CC
|
TSTDOUT
, 0, 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
,

308 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 );

314 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = (1<<7) | 1;

315 
	`mem˝y
–&(
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1]), 
ph⁄e_num
,

316 (
num_Àn
+1)/2 );

317 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
+1)/2;

318 
	`sxs_Dump
 (
_CC
|
TSTDOUT
, 0, &
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 5);

323 
	`mmiSëupReqBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

325 
	`sxs_Ârötf
–
_MMI
, "start setup connection for call\n");

326 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

327 
	}
}

338 
	$mmiD©aSëupReq
 ( 
u8
* 
ph⁄e_numbî
 )

340 
Msg_t
 * 
MsgPå
 ;

341 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcSëupReq_t
 );

342 
u8
 
ph⁄e_num
[10];

343 
u8
 
i
 ;

344 
u8
 
num_Àn
 = 
	`°æí
–
ph⁄e_numbî
 ) ;

346 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, 
ph⁄e_numbî
 ) ;

347 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
|
	`TNB_ARG
(4), " %x %x %x %x\n", 
ph⁄e_numbî
[0],Öhone_number[1],

348 
ph⁄e_numbî
[2],phone_number[3]);

350 
i
=0;i<(
num_Àn
+1)/2;i++)

352 
ph⁄e_num
[
i
]=(
ph⁄e_numbî
[2*i] & 0xf) | ((phone_number[2*i+1] & 0xf )<<4);

354 i‡–
num_Àn
 & 1 )

356 
ph⁄e_num
[
i
-1] |= 0xf0;

359 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

360 
MsgPå
->
H
.
Id
 = 
API_CC_SETUP_REQ
 ;

362 
CurTI
 = 0;

363 
ApiTIFœg
 = 0;

365 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆlTy≥
 = 
API_CC_REGULAR_CALL
;

366 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRSuµªssi⁄
 = 
FALSE
 ;

367 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRInvoˇti⁄
 = 
FALSE
 ;

368 
MsgPå
->
B
.
ApiCcSëupReq
.
CPSALí
 = 0 ;

369 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr2Lí
 = 0 ;

370 
MsgPå
->
B
.
ApiCcSëupReq
.
U£rU£rLí
 = 0 ;

372 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1Lí
 = 7;

373 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[0] = 0xA1;

374 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[1] = 0x88;

375 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[2] = 0x89;

376 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[3] = 0x21;

377 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[4] = 0x15;

378 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[5] = 0x63;

379 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[6] = 0xA0;

381 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = (1<<7) | 1;

382 
	`mem˝y
–&(
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1]), 
ph⁄e_num
,

383 (
num_Àn
+1)/2 );

384 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
+1)/2;

385 
	`sxs_Dump
 (
_CC
|
TSTDOUT
, 0, &
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 5);

386 
	`sxs_Ârötf
–
_MMI
, "start setup connection for data\n");

387 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

388 
	}
}

390 
u16
 
	$s˚_ˇŒ
 ( )

392 
	`sxs_Ârötf
–
_MMI
, "start MO \n");

394 
	`mmiSëupReq
–
s˚n_¨gv
[0] ) ;

396 
	`mmi_audioCÆlSèπ
();

399 
	}
}

401 
u16
 
	$s˚_D©aCÆl
 ( )

403 
	`sxs_Ârötf
–
_MMI
, "start Data call \n");

405 
	`mmiD©aSëupReq
–
s˚n_¨gv
[0] ) ;

407 
	}
}

419 
	$mmiCÆlC⁄fúmed
 ( )

421 
Msg_t
 * 
MsgPå
 ;

422 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcCÆlC⁄fReq_t
 );

424 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

425 
MsgPå
->
H
.
Id
 = 
API_CC_CALLCONF_REQ
;

427 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_CALLCONF_REQ>Åo CC \n");

428 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepare Call Conf\n");

429 
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

431 
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
.
Cau£Lí
 = 0;

432 
	`mmiCÆlC⁄fúmedBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
));

434 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

435 
	}
}

448 
	$mmiAÀπ
 ( )

450 
Msg_t
 * 
MsgPå
 ;

451 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcAÀπReq_t
 );

453 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

455 
MsgPå
->
H
.
Id
 = 
API_CC_ALERT_REQ
;

456 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_ALERT_REQ>Åo CC \n");

457 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareán ALERTING\n");

459 
MsgPå
->
B
.
ApiCcAÀπReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

460 
MsgPå
->
B
.
ApiCcAÀπReq
.
U£rU£rLí
 = 0;

462 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

463 
	}
}

475 
	$mmiC⁄√˘
 ( )

477 
Msg_t
 * 
MsgPå
 ;

478 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcC⁄√˘Req_t
 );

480 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

482 
MsgPå
->
H
.
Id
 = 
API_CC_CONNECT_REQ
;

483 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_CONNECT_REQ>Åo CC \n");

484 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareá CONNECT\n");

486 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

487 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
CSALí
 = 0;

488 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
U£rU£rLí
 = 0;

490 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

491 
	}
}

504 
	$mmiDiscReq
 ( )

506 
Msg_t
 * 
MsgPå
 ;

507 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcDiscReq_t
 );

509 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

511 
MsgPå
->
H
.
Id
 = 
API_CC_DISC_REQ
 ;

513 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_DISC_REQ>Åo CC \n");

514 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareá DISCONNECT\n");

516 
MsgPå
->
B
.
ApiCcDiscReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

517 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£
[0] = 0xE0;

518 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£
[1] = 0x90;

519 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£Lí
 = 2;

520 
MsgPå
->
B
.
ApiCcDiscReq
.
U£rU£rLí
 = 0;

522 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

523 
	}
}

536 
	$mmiRñReq
 ( )

538 
Msg_t
 * 
MsgPå
 ;

539 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcRñó£Req_t
 );

541 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

543 
MsgPå
->
H
.
Id
 = 
API_CC_RELEASE_REQ
 ;

544 
MsgPå
->
B
.
ApiCcRñó£Req
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

545 
MsgPå
->
B
.
ApiCcRñó£Req
.
Cau£1Lí
 = 0;

546 
MsgPå
->
B
.
ApiCcRñó£Req
.
Cau£2Lí
 = 0;

547 
MsgPå
->
B
.
ApiCcRñó£Req
.
U£rU£rLí
 = 0;

548 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_RELEASE_REQ>Åo CC \n");

549 
	`sxs_Ârötf
(
_MMI
,"MMIÑeleaseÑequirest\n") ;

551 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

552 
	}
}

565 
	$mmiRñCm±Req
 ( )

567 
Msg_t
 * 
MsgPå
 ;

568 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcRñó£Cm∂tReq_t
 );

570 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

572 
MsgPå
->
H
.
Id
 = 
API_CC_RELEASECMPLT_REQ
 ;

573 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

574 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
Cau£Lí
 = 0;

575 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
U£rU£rLí
 = 0;

576 
	`sxs_Ârötf
(
_MMI
,"MMI send <API_CC_RELEASECMPLT_REQ>Åo CC \n") ;

577 
	`sxs_Ârötf
(
_MMI
,"MMIÑelease complete \n") ;

578 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

579 
	}
}

591 
	$mmiSt›DtmfReq
()

593 
Msg_t
* 
MsgPå
 ;

594 
u16
 
Lí
 = (
Msg_t
Ë+ (
≠i_CcSt›DTMFReq_t
);

596 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

598 
MsgPå
->
H
.
Id
 = 
API_CC_STOPDTMF_REQ
 ;

599 
MsgPå
->
B
.
ApiCcSt›DTMFReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

600 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

601 
	}
}

613 
	$mmiSèπDtmfReq
()

615 
u32
 
dtmf
;

616 
u8
 
i
;

617 
u16
 
Lí
;

618 
Msg_t
* 
MsgPå
 = 
NULL
;

620 
u8
 
num_Àn
 = 
	`°æí
(
s˚n_¨gv
[0]) ;

622 i‡(
num_Àn
 < 1)

624 
	`sxs_Ârötf
(
_MMI
, "***** Please input dtmfÇumber ***** \n") ;

628 
	`sxs_Ârötf
(
_MMI
, "MMI start DTMF \n") ;

629 
	`sxs_Ârötf
–
_MMI
|
	`TSMAP
(0x1)|
	`TNB_ARG
(1), "DTMF Numbî: %s\n", 
s˚n_¨gv
[0]) ;

631 
i
 = 0; i < 
num_Àn
; i++)

634 
dtmf
 = *(
s˚n_¨gv
[0] + 
i
);

635 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "Thêöpuànumbî KEY is: %c\n", 
dtmf
) ;

637 
Lí
 = (
Msg_t
Ë+ (
≠i_CcSèπDTMFReq_t
);

639 
MsgPå
 = 
	`sxr_MÆloc
(
Lí
);

640 
MsgPå
->
H
.
Id
 = 
API_CC_STARTDTMF_REQ
 ;

641 
MsgPå
->
B
.
ApiCcSèπDTMFReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

642 
MsgPå
->
B
.
ApiCcSèπDTMFReq
.
KeyPªs£d
 = 
dtmf
;

644 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

646 
	`STT_WAIT
(0.2 
SECONDS
);

648 
	`mmiSt›DtmfReq
();

650 
	`STT_WAIT
(1 
SECONDS
);

653 
	`sxs_Ârötf
(
_MMI
, "DTMF complete!\n") ;

654 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi.c

26 
	~"sxr_›s.h
"

27 
	~"sxs_io.h
"

28 
	~"sxs_cfg.h
"

30 
	~"cmn_defs.h
"

32 
	~"mmi_msg.h
"

33 
	~"mmi_ˇŒ.h
"

34 
	~"mmi_∂mn.h
"

35 
	~"mmi_voi˚.h
"

36 
	~"mmi_cb.h
"

37 
	~"mmi_sim.h
"

38 
	~"ôf_°t.h
"

39 
	~"ôf_sim.h
"

40 #ifde‡
__GPRS__


41 
	~"mmi_sm.h
"

44 
	#__MMI_C__


	)

45 
	~"mmi_d©a.h
"

46 #unde‡
__MMI_C__


48 
u8
 
	gCurTI
;

49 
u8
 
	gApiTIFœg
;

50 
boﬁ
 
	gInCÆlFœg
 = 
FALSE
;

51 
u8
 
	gmmi_SndQueueId
;

61 
	$mmi_Inô
 ()

63 
Msg_t
 * 
OutMsg
;

65 
mmi_D©a
.
DynMbxExi°
 = 
FALSE
 ;

70 
	`mmiSèπReq
 ( 
API_GSM_900P
 | 
API_DCS_1800
 | 
API_GSM_900E
 );

76 
OutMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
) );

77 
OutMsg
->
H
.
Id
 = 
API_SIM_RESET_REQ
 ;

78 
	`sxs_Ârötf
(
_MMI
, "Send <API_SIM_RESET_REQ> message\n");

79 
	`sxr_Síd
 (
OutMsg
 , 
API_MBX
, 
SXR_SEND_MSG
 );

81 
	}
}

94 
	$mmi_P¨£
 ( 
u32
 
EvtId
 )

96 
u32
 
Evt
[
SXR_EVT_MBX_SIZE
] = { 
STT_SUCCESS
 };

98 
EvtId
)

103 
API_CC_TI_IND
 :

104 
CurTI
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiCcTIInd
.
TI
 & 0x07;

105 
ApiTIFœg
 = ((
mmi_D©a
.
RecMsg
->
B
.
ApiCcTIInd
.
TI
) & 0x08) >> 3 ;

106 
	`sxs_Ârötf
–
_MMI
,"<API_CC_TI_IND>Ñeceived by MMI\n");

107 
InCÆlFœg
 = 
TRUE
;

110 
API_CC_SETUP_IND
 :

111 
	`sxs_Ârötf
–
_MMI
,"<API_CC_SETUP_IND>Ñeceived by MMI\n");

112 
CurTI
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiCcSëupInd
.
TI
 & 0x07;

113 
ApiTIFœg
 = ((
mmi_D©a
.
RecMsg
->
B
.
ApiCcSëupInd
.
TI
) & 0x08) >> 3 ;

115 
	`mmiCÆlC⁄fúmed
( );

116 
	`mmiAÀπ
( );

117 
	`mmi_SèπPœyAÀπ
();

118 
InCÆlFœg
 = 
TRUE
;

121 
API_CC_CONNECT_IND
 :

122 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CONNECT_IND>Ñeceived by MMI\n");

125 
API_CC_AUDIOON_IND
 :

126 
	`sxs_Ârötf
–
_MMI
,"<API_CC_AUDIOON_IND>Ñeceived by MMI\n");

127 
	`mmi_St›PœyAÀπ
();

128 
	`mmi_audioOn
();

131 
API_CC_ALERT_IND
 :

132 
	`sxs_Ârötf
–
_MMI
,"<API_CC_ALERT_IND>Ñeceived by MMI\n");

135 
API_CC_FACILITY_IND
 :

136 
	`sxs_Ârötf
–
_MMI
,"<API_CC_FACILITY_IND>Ñeceived by MMI\n");

139 
API_CC_CONNECTACK_IND
 :

140 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CONNECTACK_IND>Ñeceived by MMI\n");

143 
API_CC_CALLPROC_IND
 :

144 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CALLPROC_IND>Ñeceived by MMI\n");

147 
API_CC_PROGRESS_IND
 :

148 
	`sxs_Ârötf
–
_MMI
,"<API_CC_PROGRESS_IND>Ñeceived by MMI\n");

151 
API_CC_CALLHOLD_CNF
 :

152 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CALLHOLD_CNF>Ñeceived by MMI\n");

155 
API_CC_CALLRETRIEVE_CNF
 :

156 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CALLRETRIEVE_CNF>Ñeceived by MMI\n");

159 
API_CC_RELEASECMPLT_IND
 :

160 
	`sxs_Ârötf
–
_MMI
,"<API_CC_RELEASECMPLT_IND>Ñeceived by MMI\n");

161 
	`mmi_audioCÆlSt›
();

162 
InCÆlFœg
 = 
FALSE
;

165 
API_CC_ERROR_IND
 :

166 
	`sxs_Ârötf
–
_MMI
,"<API_CC_ERROR_IND>Ñeceived by MMI\n");

167 
	`mmi_audioCÆlSt›
();

168 
	`sxs_Ârötf
 (
_MMI
,"Mobile has been disconnected\n");

169 
InCÆlFœg
 = 
FALSE
;

172 
API_CC_DISC_IND
 :

173 
	`sxs_Ârötf
–
_MMI
,"<API_CC_DISC_IND>Ñeceived by MMI\n");

174 
	`mmi_audioCÆlSt›
();

175 
	`mmiRñReq
( );

176 
InCÆlFœg
 = 
FALSE
;

179 
API_CC_RELEASE_IND
 :

180 
	`sxs_Ârötf
–
_MMI
,"<API_CC_RELEASE_IND>Ñeceived by MMI\n");

181 
	`mmi_audioCÆlSt›
();

182 
	`mmiRñCm±Req
( );

183 
InCÆlFœg
 = 
FALSE
;

186 
API_CC_CHANMODE_IND
 :

187 
	`sxs_Ârötf
–
_MMI
,"<API_CC_CHANMODE_IND>Ñeceived by MMI\n");

193 
API_SIM_RESET_CNF
:

198 
Msg_t
 * 
OutMsg
;

199 
	`sxs_Ârötf
–
_MMI
,"<API_SIM_RESET_CNF>Ñeceived by MMI\n");

200 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(1),"ApiSimRe£tCnf.Re£tResu…: %dÑe˚ived by MMI\n", 
mmi_D©a
.
RecMsg
->
B
.
ApiSimRe£tCnf
.
Re£tResu…
);

201 if–
mmi_D©a
.
RecMsg
->
B
.
ApiSimRe£tCnf
.
Re£tResu…
 & 2)

203 
OutMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
) );

204 
OutMsg
->
H
.
Id
 = 
API_SIM_OPEN_IND
 ;

205 
	`sxr_Síd
 (
OutMsg
 , 
API_MBX
, 
SXR_SEND_MSG
 ) ;

207 
	`sxr_Síd
–
Evt
, 
STT_MBX
, 
SXR_SEND_EVT
 );

211 
API_SIM_UPDATEBINARY_CNF
:

212 
API_SIM_UPDATERECORD_CNF
:

213 
API_SIM_INVALIDATE_CNF
:

214 
API_SIM_REHABILITATE_CNF
:

215 
API_SIM_CHANGECHV_CNF
:

216 
API_SIM_VERIFYCHV_CNF
:

217 
API_SIM_ENABLECHV_CNF
:

218 
API_SIM_UNBLOCKCHV_CNF
:

219 
API_SIM_DISABLECHV_CNF
:

220 
API_SIM_DEDICFILESTATUS_CNF
:

221 
SIM_RUN_GSM_ALGO_CNF
:

222 
API_SIM_TERMINALPROFILE_CNF
:

224 
	`sxr_Síd
–
Evt
, 
STT_MBX
, 
SXR_SEND_EVT
 );

228 
API_SIM_READBINARY_CNF
:

230 if((
mmiRódE¡úeBö¨y
 =
TRUE
Ë&& (
mmiRódE¡úeBö¨yFûeNb
 < (
NB_ELEM_FILE
-1)))

232 
	`sxs_Ârötf
 (
_MMI
, "============================================== \n");

233 
	`sxs_Ârötf
 (
_MMI
 | 
	`TNB_ARG
(1), "ªad bö¨y fûê%d i†ok \n",
mmiRódE¡úeBö¨yFûeNb
);

234 
	`sxs_Ârötf
 (
_MMI
, "============================================== \n");

235 
	`s˚_RódAŒSimFûe
();

239 
mmiRódE¡úeBö¨y
 = 
FALSE
;

240 
	`sxr_Síd
–
Evt
, 
STT_MBX
, 
SXR_SEND_EVT
 );

244 
API_SIM_READRECORD_CNF
:

246 if((
mmiRódE¡úeBö¨y
 =
TRUE
Ë&& (
mmiRódE¡úeBö¨yFûeNb
 < (
NB_ELEM_FILE
-1)))

248 
	`sxs_Ârötf
 (
_MMI
, "============================================== \n");

249 
	`sxs_Ârötf
 (
_MMI
 | 
	`TNB_ARG
(1), "ªadÑec‹d fûê%d i†ok \n",
mmiRódE¡úeBö¨yFûeNb
);

250 
	`sxs_Ârötf
 (
_MMI
, "============================================== \n");

251 
	`s˚_RódAŒSimFûe
();

255 
mmiRódE¡úeBö¨y
 = 
FALSE
;

256 
	`sxr_Síd
–
Evt
, 
STT_MBX
, 
SXR_SEND_EVT
 );

261 
API_SIM_STATUSERROR_IND
:

263 
Msg_t
 *
OutMsg
 = 
	`sxr_MÆloc
––
MsgHód_t
 ) );

264 
	`sxs_Ârötf
–
_MMI
,"<API_SIM_STATUSERROR_IND>Ñeceived by MMI\n");

265 
OutMsg
->
H
.
Id
 = 
API_SIM_CLOSE_IND
 ;

266 
	`sxr_Síd
 (
OutMsg
 , 
API_MBX
, 
SXR_SEND_MSG
 ) ;

267 
	`sxs_Ârötf
–
_MMI
,"<API_SIM_CLOSE_IND>Ñeceived by MMI\n");

271 
API_SIM_ELEMFILESTATUS_CNF
 :

273 
u8
 
°ru˘_ef
;

274 i‡(
mmiRódE¡úeBö¨y
 =
TRUE
)

276 
°ru˘_ef
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[13];

277 if(
°ru˘_ef
 == 0)

279 
mmiRódE¡úeBö¨yFûeSize
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[3]

280 |
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[2]<<8;

281 
	`s˚_RódBö¨ySim
();

285 if((
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[2]!=0)

286 ||(
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[3]!=0))

288 
mmiRódE¡úeBö¨yFûeSize
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSimEÀmFûeSètusCnf
.
D©a
[14];

289 
	`s˚_RódRec‹dSim
();

292 
	`sxs_Ârötf
 (
_MMI
| 
	`TNB_ARG
(1), "fûêsizê%d\n", 
mmiRódE¡úeBö¨yFûeSize
);

296 
	`sxr_Síd
–
Evt
, 
STT_MBX
, 
SXR_SEND_EVT
 );

302 
API_NW_CSREGSTATUS_IND
 :

304 
Msg_t
 *
OutMsg
 = 
	`sxr_MÆloc
––
MsgHód_t
 ) +1 );

306 
	`sxs_Ârötf
–
_MMI
,"<API_NW_CSREGSTATUS_IND>Ñeceived by MMI\n");

308 
	`sxs_Ârötf
 (
_MMI
|
	`TNB_ARG
(1)," Network STATUS for CS: %d \n",

309 
mmi_D©a
.
RecMsg
->
B
.
ApiNwCsRegSètusInd
.
Sètus
) ;

311 
OutMsg
->
H
.
Id
 = 
API_QUAL_REPORT_REQ
;

312 
OutMsg
->
B
.
ApiQuÆRï‹tReq
.
SèπRï‹t
=
TRUE
;

313 
	`sxr_Síd
 (
OutMsg
 , 
API_MBX
, 
SXR_SEND_MSG
 );

314 
	`sxs_Ârötf
–
_MMI
,"<API_QUAL_REPORT_REQ> sendÅo by RR\n");

318 
API_NW_PSREGSTATUS_IND
 :

320 
	`sxs_Ârötf
–
_MMI
,"<API_NW_CSREGSTATUS_IND>Ñeceived by MMI\n");

322 
	`sxs_Ârötf
 (
_MMI
|
	`TNB_ARG
(1), " Network STATUS for PS: %d \n",

323 
mmi_D©a
.
RecMsg
->
B
.
ApiNwPsRegSètusInd
.
Sètus
) ;

327 
API_NW_LIST_IND
 :

329 
u8
 
i
;

330 
	`sxs_Ârötf
–
_MMI
,"<API_NW_LIST_IND>Ñeceived by MMI\n");

332 
i
=0; i< 
mmi_D©a
.
RecMsg
->
B
.
ApiNwLi°Ind
.
PlmnNb
; i++)

333 
	`sxs_Ârötf
 (
_MMI
|
	`TNB_ARG
(3), "AVail Plmn 0x%x 0x%x 0x%x \n",

334 
mmi_D©a
.
RecMsg
->
B
.
ApiNwLi°Ind
.
PlmnL
[3*
i
 +0] ,

335 
mmi_D©a
.
RecMsg
->
B
.
ApiNwLi°Ind
.
PlmnL
[3*
i
 +1] ,

336 
mmi_D©a
.
RecMsg
->
B
.
ApiNwLi°Ind
.
PlmnL
[3*
i
 +2] ) ;

340 
API_QUAL_REPORT_CNF
:

342 
	`sxs_Ârötf
–
_MMI
, "<API_QUAL_REPORT_CNF>Ñeceived by MMI\n");

343 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "Serving cell Rssi: %d, RxQual: %d\n",

344 
mmi_D©a
.
RecMsg
->
B
.
ApiQuÆRï‹tCnf
.
Rssi
,

345 
mmi_D©a
.
RecMsg
->
B
.
ApiQuÆRï‹tCnf
.
RxQuÆ
);

350 
API_SS_TI_IND
 :

351 
CurTI
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSsTIInd
.
TI
 & 0x07;

352 
ApiTIFœg
 = ((
mmi_D©a
.
RecMsg
->
B
.
ApiSsTIInd
.
TI
) & 0x08) >> 3 ;

353 
	`sxs_Ârötf
–
_MMI
,"<API_SS_TI_IND>Ñeceived by MMI\n");

354 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(3),"\tTI: 0x%x Op: 0x%x Code: 0x%x\n",

355 
mmi_D©a
.
RecMsg
->
B
.
ApiSsTIInd
.
TI
,

356 
mmi_D©a
.
RecMsg
->
B
.
ApiSsTIInd
.
ss_O≥øti⁄
,

357 
mmi_D©a
.
RecMsg
->
B
.
ApiSsTIInd
.
ss_Code
 );

360 
API_SS_ACTION_CNF
 :

361 
	`sxs_Ârötf
–
_MMI
,"<API_SS_ACTION_CNF>Ñeceived by MMI\n");

362 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(3),"\tTI: 0x%x Op: 0x%x Code: 0x%x\n",

363 
mmi_D©a
.
RecMsg
->
B
.
ApiSsA˘i⁄Cnf
.
TI
,

364 
mmi_D©a
.
RecMsg
->
B
.
ApiSsA˘i⁄Cnf
.
ss_O≥øti⁄
,

365 
mmi_D©a
.
RecMsg
->
B
.
ApiSsA˘i⁄Cnf
.
ss_Code
 );

368 
API_SS_ERROR_IND
 :

369 
	`sxs_Ârötf
–
_MMI
,"<API_SS_ERROR_IND>Ñeceived by MMI\n");

370 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(3),"\tTI = 0x%x Op: 0x%x Code: 0x%x\n",

371 
mmi_D©a
.
RecMsg
->
B
.
ApiSsEº‹Ind
.
TI
,

372 
mmi_D©a
.
RecMsg
->
B
.
ApiSsEº‹Ind
.
ss_O≥øti⁄
,

373 
mmi_D©a
.
RecMsg
->
B
.
ApiSsEº‹Ind
.
ss_Code
 );

376 #ifde‡
__GPRS__


378 
API_PSDATA_IND
 :

379 
	`sxs_Ârötf
–
_MMI
,"<API_PSDATA_IND>Ñeceived by MMI\n");

382 
API_PS_QUEUECREATE_IND
 :

383 
	`sxs_Ârötf
–
_MMI
,"<API_PS_QUEUECREATE_IND>Ñeceived by MMI\n");

384 
mmi_SndQueueId
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSndQueueCª©eInd
.
QueueId
;

388 
API_PDP_CTXACTIVATE_IND
 :

389 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXACTIVATE_IND>Ñeceived by MMI\n");

390 
	`sxs_Ârötf
(
_MMI
,"MMIÑequestáctivation inititated byÇtw\n");

391 
	`mmiNwkInôüãdA˘iv©ePdpCtx
();

394 
API_PDP_CTXACTIVATE_REJ
 :

395 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXACTIVATE_REJ>Ñeceived by MMI\n");

396 
	`sxs_Ârötf
(
_MMI
, "NwkÑeject PDP ctxáctivation\n");

397 
mmi_NS≠iU£d
 = 
FALSE
;

400 
API_PDP_CTXSMINDEX_IND
 :

401 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXSMINDEX_IND>Ñeceived by MMI\n");

402 
	`sxs_Ârötf
 (
_MMI
|
	`TNB_ARG
(1)," ApiPdpCtxSmIndexInd.SmIndex: %d \n",

403 
mmi_D©a
.
RecMsg
->
B
.
ApiPdpCtxSmIndexInd
.
SmIndex
) ;

405 
mmi_SmIndex
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiPdpCtxSmIndexInd
.
SmIndex
;

408 
API_PDP_CTXMODIFY_IND
 :

409 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXMODIFY_IND>Ñeceived by MMI\n");

410 
	`sxs_Ârötf
(
_MMI
,"MMIácceptsÖdp modification\n");

411 
	`mmiPdpModifyAcc
();

414 
API_PDP_CTXACTIVATE_CNF
 :

415 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXACTIVATE_CNF>Ñeceived by MMI\n");

416 
	`sxs_Ârötf
(
_MMI
,"The PDP ctx isáctivation\n");

419 
API_PDP_CTXDEACTIVATE_IND
 :

420 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXDEACTIVATE_IND>Ñeceived by MMI\n");

421 
	`sxs_Ârötf
(
_MMI
,"The PDP ctx is deactivation\n");

422 
mmi_NS≠iU£d
 = 
FALSE
;

425 
API_PDP_CTXDEACTIVATE_CNF
 :

426 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXDEACTIVATE_CNF>Ñeceived by MMI\n");

427 
	`sxs_Ârötf
(
_MMI
,"The PDP ctx is deactivation\n");

428 
mmi_NS≠iU£d
 = 
FALSE
;

431 
API_PDP_CTXMODIFY_CNF
 :

432 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXMODIFY_CNF>Ñeceived by MMI\n");

433 
	`sxs_Ârötf
(
_MMI
,"The PDP CTX modification is successful\n");

436 
API_PDP_CTXMODIFY_REJ
 :

437 
	`sxs_Ârötf
–
_MMI
,"<API_PDP_CTXMODIFY_REJ>Ñeceived by MMI\n");

438 
	`sxs_Ârötf
(
_MMI
, "The PDP CTX modification is failure\n");

443 
API_SMSCB_RECEIVE_IND
 :

445 
u16
 
Lí
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBRe˚iveInd
.
D©aLí
;

446 
u16
 
i
;

447 
u8
 *
MsgTxt
, 
Dcs
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBRe˚iveInd
.
DCS
;

449 
	`sxs_Ârötf
–
_MMI
,"<API_SMSCB_RECEIVE_IND>Ñeceived by MMI\n");

450 
	`sxs_Ârötf
(
_MMI
,"SMSCB Receive\n");

452 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "MId : 0x%04X\n", 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBRe˚iveInd
.
MId
);

453 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "D©®Lí : %u\n", 
Lí
);

454 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "DCS : 0x%02X\n", 
Dcs
);

456 
MsgTxt
 = 
	`sxr_MÆloc
(
Lí
+1);

457 
	`mem˝y
(
MsgTxt
, 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBRe˚iveInd
.
D©a
, 
Lí
);

459 i‡–(!(
Dcs
 & 0xC0 )) || ( (Dcs & 0xCC) == 0x40 ) || ( (Dcs & 0xF4) == 0xF0 ) )

462 
i
=0; i<
Lí
; i++)

463 
MsgTxt
[
i
] = 
mmi_GsmToPCCP437
[MsgTxt[i]];

466 
MsgTxt
[
Lí
] = '\0';

467 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1),"Mesßgê: %s\n", 
MsgTxt
);

468 
	`sxr_Fªe
(
MsgTxt
);

472 
API_SMSCB_PAGE_IND
 :

474 
u16
 
Lí
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBPageInd
.
D©aLí
;

475 
	`sxs_Ârötf
–
_MMI
,"<API_SMSCB_PAGE_IND>Ñeceived by MMI\n");

476 
	`sxs_Ârötf
(
_MMI
, "SMSCB Page\n");

477 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "D©®Lí : %u\n", 
Lí
);

478 
	`sxs_Dump
–
_MMI
, 0, 
mmi_D©a
.
RecMsg
->
B
.
ApiSmsCBPageInd
.
D©a
, 
Lí
 );

482 
API_STOP_CNF
:

483 
CurTI
 = 
ApiTIFœg
 = 
mmi_SndQueueId
 = 0;

484 
InCÆlFœg
 = 
FALSE
;

485 
	`sxs_Ârötf
–
_MMI
,"<API_STOP_CNF>Ñeceived by MMI\n");

486 
	`sxs_Ârötf
(
_MMI
, "The MS has been stopped\n");

490 
	`sxs_Ârötf
 (
_MMI
|
	`TNB_ARG
(1), " LOST MSG !!! Msg.ID = 0x%4x\n", 
EvtId
);

493 
	}
}

505 
	$mmi_P¨£Msg
 ( * 
Msg
 )

508 
mmi_D©a
.
RecMsg
 = 
Msg
 ;

509 
	`mmi_P¨£
 (
mmi_D©a
.
RecMsg
->
H
.
Id
 );

511 
	`sxr_Fªe
 (
mmi_D©a
.
RecMsg
) ;

513 
	}
}

525 
	$mmi_P¨£Sig«l
 ( 
u32
 * 
Sig«l
 )

528 
	}
}

531 c⁄° 
sxs_TaskP¨£_t
 
	gmmi_TaskP¨£
 =

533 
mmi_Inô
,

534 
mmi_P¨£Msg
,

535 
mmi_P¨£Sig«l
,

536 
MMI_MBX


	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_call.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_lib.h
"

30 
	~"sxs_io.h
"

33 
	~"mmi_msg.h
"

34 
	~"ôf_msg.h
"

35 
	~"°t.h
"

36 
	~"mmi_d©a.h
"

37 
	~"mmi_ˇŒ.h
"

39 
u8
 
CurTI
;

40 
u8
 
ApiTIFœg
;

41 
boﬁ
 
InCÆlFœg
;

44 
	#MMI_BEARER_CAPA_SPEECH_GSM_FR
 ( 1 << 0 )

	)

45 
	#MMI_BEARER_CAPA_SPEECH_GSM_EFR
 ( 1 << 1 )

	)

46 
	#MMI_BEARER_CAPA_SPEECH_GSM_HR
 ( 1 << 2 )

	)

47 
	#MMI_BEARER_CAPA_SPEECH_FR_AMR
 ( 1 << 3 )

	)

48 
	#MMI_BEARER_CAPA_SPEECH_HR_AMR
 ( 1 << 4 )

	)

52 
u8
 
	mS≥echVîInd
;

53 }
	tmmi_BóªrC≠a_t
;

55 
mmi_BóªrC≠a_t
 
	gmmi_MsBóªrC≠a
 =

59 
MMI_BEARER_CAPA_SPEECH_GSM_FR


69 
	#RADIO_CHAN_REQ_RESERVED
 0

	)

70 
	#RADIO_CHAN_REQ_FULL_RATE_ONLY
 1

	)

71 
	#RADIO_CHAN_REQ_DUAL_RATE_HALF_PREFER
 2

	)

72 
	#RADIO_CHAN_REQ_DUAL_RATE_FULL_PREFER
 3

	)

75 
	#INFO_TRANS_CAP_SPEECH
 0

	)

76 
	#INFO_TRANS_CAP_DIG
 1

	)

77 
	#INFO_TRANS_CAP_RESERVED
 7

78 

	)

80 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V1
 0x0

81 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V2
 0x2

82 
	#SPEECH_VER_IND_FULL_RATE_SPEECH_V3
 0x4

83 
	#SPEECH_VER_IND_HALF_RATE_SPEECH_V1
 0x1

84 
	#SPEECH_VER_IND_HALF_RATE_SPEECH_V3
 0x5

85 
	#SPEECH_VER_IND_NO_SPEECH_VERSION
 0xF

86 

	)

88 
	#M_SET_CONTINUE
(
_BCHódî
, 
_off£t
Ë*((
u8
 *)(_BCHódîË+ (_off£t)Ë&~(1<<7)

	)

90 
	#M_SET_EXT
(
_BCHódî
, 
_off£t
Ë*((
u8
 *)(_BCHódîË+ (_off£t)Ë|(1<<7)

	)

92 
	#M_SET_RADIO_CHAN_REQ
(
_BCHódî
, 
_vÆue
Ë(*(
u8
 *)(_BCHódî)Ë|((_vÆueË<< 5)

	)

94 
	#M_SET_INFO_TRANS_CAP
(
_BCHódî
, 
_vÆue
Ë(*(
u8
 *)(_BCHódî)Ë|(_vÆue)

	)

96 
	#M_SET_SPEECH_VER_IND
(
_BCHódî
, 
_off£t
, 
_vÆue
Ë*((
u8
 *)(_BCHódîË+ (_off£t)Ë|(_vÆue)

	)

109 
u8
 
	$bóªrS≥echVîIndSë
(
u8
* 
Bóªr
, u8 
off£t
)

111 
u8
 
ãmp_off£t
 = 
off£t
;

115 i‡(
mmi_MsBóªrC≠a
.
S≥echVîInd
 & 
MMI_BEARER_CAPA_SPEECH_GSM_FR
)

117 
	`M_SET_SPEECH_VER_IND
(
Bóªr
, 
ãmp_off£t
, 
SPEECH_VER_IND_FULL_RATE_SPEECH_V1
);

118 
ãmp_off£t
++;

120 i‡(
mmi_MsBóªrC≠a
.
S≥echVîInd
 & 
MMI_BEARER_CAPA_SPEECH_GSM_HR
)

122 
	`M_SET_SPEECH_VER_IND
(
Bóªr
, 
ãmp_off£t
, 
SPEECH_VER_IND_HALF_RATE_SPEECH_V1
);

123 
ãmp_off£t
++;

125 i‡(
mmi_MsBóªrC≠a
.
S≥echVîInd
 & 
MMI_BEARER_CAPA_SPEECH_GSM_EFR
)

127 
	`M_SET_SPEECH_VER_IND
(
Bóªr
, 
ãmp_off£t
, 
SPEECH_VER_IND_FULL_RATE_SPEECH_V2
);

128 
ãmp_off£t
++;

130 i‡(
mmi_MsBóªrC≠a
.
S≥echVîInd
 & 
MMI_BEARER_CAPA_SPEECH_HR_AMR
)

132 
	`M_SET_SPEECH_VER_IND
(
Bóªr
, 
ãmp_off£t
, 
SPEECH_VER_IND_HALF_RATE_SPEECH_V3
);

133 
ãmp_off£t
++;

135 i‡(
mmi_MsBóªrC≠a
.
S≥echVîInd
 & 
MMI_BEARER_CAPA_SPEECH_FR_AMR
)

137 
	`M_SET_SPEECH_VER_IND
(
Bóªr
, 
ãmp_off£t
, 
SPEECH_VER_IND_FULL_RATE_SPEECH_V3
);

138 
ãmp_off£t
++;

140  
ãmp_off£t
;

141 
	}
}

153 
boﬁ
 
	$mmiSëupReqBóªrC≠Së
(
≠i_CcSëupReq_t
 *
CcSëupReq
)

155 
u8
 
bóªr_Àn
 = 0;

156 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set start\n");

157 if(!
CcSëupReq
->
Bóªr1
)

159 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set without BearerCap\n");

160  
FALSE
;

164 
	`mem£t
(
CcSëupReq
->
Bóªr1
, 0, 14);

166 
	`M_SET_RADIO_CHAN_REQ
(
CcSëupReq
->
Bóªr1
, 
RADIO_CHAN_REQ_FULL_RATE_ONLY
);

167 
	`M_SET_INFO_TRANS_CAP
(
CcSëupReq
->
Bóªr1
, 
INFO_TRANS_CAP_SPEECH
);

168 
	`M_SET_CONTINUE
(
CcSëupReq
->
Bóªr1
, 0);

170 
bóªr_Àn
 = 
	`bóªrS≥echVîIndSë
(
CcSëupReq
->
Bóªr1
, 1);

171 
	`M_SET_EXT
(
CcSëupReq
->
Bóªr1
, 
bóªr_Àn
-1);

173 
CcSëupReq
->
Bóªr1Lí
 = 
bóªr_Àn
;

175 
CcSëupReq
->
Bóªr2Lí
 = 0;

177 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcSëupReq
->
Bóªr1
, CcSëupReq->
Bóªr1Lí
);

178  
TRUE
;

179 
	}
}

191 
boﬁ
 
	$mmiSëupReqHÆfR©eBóªrC≠Së
(
≠i_CcSëupReq_t
 *
CcSëupReq
)

193 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqHalfRateBearerCapSet Set start\n");

194 if(!
CcSëupReq
->
Bóªr1
)

196 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqHalfRateBearerCapSet Set without BearerCap\n");

197  
FALSE
;

201 
	`mem£t
(
CcSëupReq
->
Bóªr1
, 0, 14);

203 
	`M_SET_RADIO_CHAN_REQ
(
CcSëupReq
->
Bóªr1
, 
RADIO_CHAN_REQ_DUAL_RATE_HALF_PREFER
);

204 
	`M_SET_CONTINUE
(
CcSëupReq
->
Bóªr1
, 0);

206 
	`M_SET_SPEECH_VER_IND
(
CcSëupReq
->
Bóªr1
, 1, 
SPEECH_VER_IND_HALF_RATE_SPEECH_V1
);

207 
	`M_SET_EXT
(
CcSëupReq
->
Bóªr1
, 1);

209 
CcSëupReq
->
Bóªr1Lí
 = 2;

211 
CcSëupReq
->
Bóªr2Lí
 = 0;

213 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcSëupReq
->
Bóªr1
, CcSëupReq->
Bóªr1Lí
);

214  
TRUE
;

215 
	}
}

227 
boﬁ
 
	$mmiCÆlC⁄fúmedBóªrC≠Së
(
≠i_CcCÆlC⁄fReq_t
 *
CcCÆlC⁄fReq
)

229 
u8
 
bóªr_Àn
 = 0;

230 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiCallConfirmedBearerCapSet Set start\n");

231 if(!
CcCÆlC⁄fReq
->
Bóªr1
)

233 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "mmiSetupReqBearerCapSet Set without BearerCap\n");

234  
FALSE
;

238 
	`mem£t
(
CcCÆlC⁄fReq
->
Bóªr1
, 0, 14);

240 
	`M_SET_RADIO_CHAN_REQ
(
CcCÆlC⁄fReq
->
Bóªr1
, 
RADIO_CHAN_REQ_FULL_RATE_ONLY
);

241 
	`M_SET_INFO_TRANS_CAP
(
CcCÆlC⁄fReq
->
Bóªr1
, 
INFO_TRANS_CAP_SPEECH
);

242 
	`M_SET_CONTINUE
(
CcCÆlC⁄fReq
->
Bóªr1
, 0);

244 
bóªr_Àn
 = 
	`bóªrS≥echVîIndSë
(
CcCÆlC⁄fReq
->
Bóªr1
, 1);

245 
	`M_SET_EXT
(
CcCÆlC⁄fReq
->
Bóªr1
, 
bóªr_Àn
-1);

247 
CcCÆlC⁄fReq
->
Bóªr1Lí
 = 
bóªr_Àn
;

248 
CcCÆlC⁄fReq
->
Bóªr2Lí
 = 0;

250 
	`sxs_Dump
(
_MMI
|
TSTDOUT
, 0, (
u8
 *)
CcCÆlC⁄fReq
->
Bóªr1
, CcCÆlC⁄fReq->
Bóªr1Lí
);

251  
TRUE
;

252 
	}
}

264 
	$mmiSëupReq
 ( 
u8
* 
ph⁄e_numbî
 )

266 
Msg_t
 * 
MsgPå
 ;

267 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcSëupReq_t
 );

268 
u8
 
ph⁄e_num
[10];

269 
u8
 
i
 ;

270 
u8
 
num_Àn
 = 
	`°æí
–
ph⁄e_numbî
 ) ;

271 
u8
 
Ty≥
 = 
API_CC_REGULAR_CALL
 ;

272 
boﬁ
 
IsHR
 = 
FALSE
;

274 if(
InCÆlFœg
)

277 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, 
ph⁄e_numbî
 ) ;

278 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
|
	`TNB_ARG
(4), " %x %x %x %x", 
ph⁄e_numbî
[0],Öhone_number[1],

279 
ph⁄e_numbî
[2],phone_number[3]);

281 
i
=0;i<(
num_Àn
+1)/2;i++)

283 
ph⁄e_num
[
i
]=(
ph⁄e_numbî
[2*i] & 0xf) | ((phone_number[2*i+1] & 0xf )<<4);

285 i‡–
num_Àn
 & 1 )

287 
ph⁄e_num
[
i
-1] |= 0xf0;

291 i‡–((
ph⁄e_numbî
[0] & 0x0f) == 1) && ((phone_number[1] & 0x0f) == 1) &&

292 ((
ph⁄e_numbî
[2] & 0x0f) == 2) )

294 
Ty≥
 = 
API_CC_EMERGENCY_CALL
;

295 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "emergency call\n");

298 i‡–((
ph⁄e_numbî
[0] & 0x0f) == 2) && ((phone_number[1] & 0x0f) == 2) &&

299 (
num_Àn
 == 2) )

300 
IsHR
 = 
TRUE
;

302 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

303 
MsgPå
->
H
.
Id
 = 
API_CC_SETUP_REQ
 ;

305 
CurTI
 = 0;

306 
ApiTIFœg
 = 0;

308 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆlTy≥
 = 
Ty≥
;

309 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRSuµªssi⁄
 = 
FALSE
 ;

310 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRInvoˇti⁄
 = 
FALSE
 ;

311 
MsgPå
->
B
.
ApiCcSëupReq
.
CPSALí
 = 0 ;

313 
MsgPå
->
B
.
ApiCcSëupReq
.
U£rU£rLí
 = 0 ;

315 i‡–
Ty≥
 =
API_CC_REGULAR_CALL
 )

318 i‡–
IsHR
 )

320 
	`mmiSëupReqHÆfR©eBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

324 
	`mmiSëupReqBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

329 i‡–
ph⁄e_num
[0] == 0 )

331 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
,"international call\n");

332 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = 0x91;

333 
	`mem˝y
–&
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], &
ph⁄e_num
[1],

334 (
num_Àn
)/2 );

335 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
)/2;

337 i‡–(
ph⁄e_num
[0] == 0x10) && ((phone_num[1] & 0x0F) == 0x01) )

340 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, "international call 011\n");

341 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = 0x91;

343 
i
=0;i<(
num_Àn
-2)/2;i++)

345 
ph⁄e_num
[
i
](
ph⁄e_numbî
[2*i+3] & 0xf) |

346 ((
ph⁄e_numbî
[2*
i
+4] & 0xf )<<4);

348 i‡–!(
num_Àn
 & 1) )

350 
ph⁄e_num
[
i
-1] |= 0xf0;

352 
	`mem˝y
–&
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 
ph⁄e_num
,

353 (
num_Àn
)/2 );

354 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
-2)/2;

355 
	`sxs_Dump
–
_CC
|
TSTDOUT
, 0, 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
,

356 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 );

362 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = (1<<7) | 1;

363 
	`mem˝y
–&(
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1]), 
ph⁄e_num
,

364 (
num_Àn
+1)/2 );

365 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
+1)/2;

366 
	`sxs_Dump
 (
_CC
|
TSTDOUT
, 0, &
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 5);

371 
	`mmiSëupReqBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcSëupReq
));

373 
	`sxs_Ârötf
–
_MMI
, "start setup connection for call\n");

374 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

375 
	}
}

386 
	$mmiD©aSëupReq
 ( 
u8
* 
ph⁄e_numbî
 )

388 
Msg_t
 * 
MsgPå
 ;

389 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcSëupReq_t
 );

390 
u8
 
ph⁄e_num
[10];

391 
u8
 
i
 ;

392 
u8
 
num_Àn
 = 
	`°æí
–
ph⁄e_numbî
 ) ;

394 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
, 
ph⁄e_numbî
 ) ;

395 
	`sxs_Ârötf
–
_MMI
|
TSTDOUT
|
	`TNB_ARG
(4), " %x %x %x %x\n", 
ph⁄e_numbî
[0],Öhone_number[1],

396 
ph⁄e_numbî
[2],phone_number[3]);

398 
i
=0;i<(
num_Àn
+1)/2;i++)

400 
ph⁄e_num
[
i
]=(
ph⁄e_numbî
[2*i] & 0xf) | ((phone_number[2*i+1] & 0xf )<<4);

402 i‡–
num_Àn
 & 1 )

404 
ph⁄e_num
[
i
-1] |= 0xf0;

407 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

408 
MsgPå
->
H
.
Id
 = 
API_CC_SETUP_REQ
 ;

410 
CurTI
 = 0;

411 
ApiTIFœg
 = 0;

413 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆlTy≥
 = 
API_CC_REGULAR_CALL
;

414 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRSuµªssi⁄
 = 
FALSE
 ;

415 
MsgPå
->
B
.
ApiCcSëupReq
.
CLIRInvoˇti⁄
 = 
FALSE
 ;

416 
MsgPå
->
B
.
ApiCcSëupReq
.
CPSALí
 = 0 ;

417 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr2Lí
 = 0 ;

418 
MsgPå
->
B
.
ApiCcSëupReq
.
U£rU£rLí
 = 0 ;

420 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1Lí
 = 7;

421 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[0] = 0xA1;

422 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[1] = 0x88;

423 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[2] = 0x89;

424 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[3] = 0x21;

425 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[4] = 0x15;

426 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[5] = 0x63;

427 
MsgPå
->
B
.
ApiCcSëupReq
.
Bóªr1
[6] = 0xA0;

429 
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[0] = (1<<7) | 1;

430 
	`mem˝y
–&(
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1]), 
ph⁄e_num
,

431 (
num_Àn
+1)/2 );

432 
MsgPå
->
B
.
ApiCcSëupReq
.
CPNLí
 = 1+(
num_Àn
+1)/2;

433 
	`sxs_Dump
 (
_CC
|
TSTDOUT
, 0, &
MsgPå
->
B
.
ApiCcSëupReq
.
CÆÀdP¨tyNb
[1], 5);

434 
	`sxs_Ârötf
–
_MMI
, "start setup connection for data\n");

435 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

436 
	}
}

438 
u16
 
	$s˚_ˇŒ
 ( )

440 
	`sxs_Ârötf
–
_MMI
, "start MO \n");

442 
	`mmiSëupReq
–
s˚n_¨gv
[0] ) ;

444 
	`mmi_audioCÆlSèπ
();

447 
	}
}

449 
u16
 
	$s˚_D©aCÆl
 ( )

451 
	`sxs_Ârötf
–
_MMI
, "start Data call \n");

453 
	`mmiD©aSëupReq
–
s˚n_¨gv
[0] ) ;

455 
	}
}

467 
	$mmiCÆlC⁄fúmed
 ( )

469 
Msg_t
 * 
MsgPå
 ;

470 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcCÆlC⁄fReq_t
 );

472 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

473 
MsgPå
->
H
.
Id
 = 
API_CC_CALLCONF_REQ
;

475 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_CALLCONF_REQ>Åo CC \n");

476 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepare Call Conf\n");

477 
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

479 
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
.
Cau£Lí
 = 0;

480 
	`mmiCÆlC⁄fúmedBóªrC≠Së
(&(
MsgPå
->
B
.
ApiCcCÆlC⁄fReq
));

482 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

483 
	}
}

496 
	$mmiAÀπ
 ( )

498 
Msg_t
 * 
MsgPå
 ;

499 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcAÀπReq_t
 );

501 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

503 
MsgPå
->
H
.
Id
 = 
API_CC_ALERT_REQ
;

504 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_ALERT_REQ>Åo CC \n");

505 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareán ALERTING\n");

507 
MsgPå
->
B
.
ApiCcAÀπReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

508 
MsgPå
->
B
.
ApiCcAÀπReq
.
U£rU£rLí
 = 0;

510 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

511 
	}
}

523 
	$mmiC⁄√˘
 ( )

525 
Msg_t
 * 
MsgPå
 ;

526 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcC⁄√˘Req_t
 );

528 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

530 
MsgPå
->
H
.
Id
 = 
API_CC_CONNECT_REQ
;

531 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_CONNECT_REQ>Åo CC \n");

532 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareá CONNECT\n");

534 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

535 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
CSALí
 = 0;

536 
MsgPå
->
B
.
ApiCcC⁄√˘Req
.
U£rU£rLí
 = 0;

538 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

539 
	}
}

552 
	$mmiDiscReq
 ( )

554 
Msg_t
 * 
MsgPå
 ;

555 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcDiscReq_t
 );

557 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

559 
MsgPå
->
H
.
Id
 = 
API_CC_DISC_REQ
 ;

561 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_DISC_REQ>Åo CC \n");

562 
	`sxs_Ârötf
–
_MMI
, "MMIÖrepareá DISCONNECT\n");

564 
MsgPå
->
B
.
ApiCcDiscReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

565 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£
[0] = 0xE0;

566 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£
[1] = 0x90;

567 
MsgPå
->
B
.
ApiCcDiscReq
.
Cau£Lí
 = 2;

568 
MsgPå
->
B
.
ApiCcDiscReq
.
U£rU£rLí
 = 0;

570 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

571 
	}
}

584 
	$mmiRñReq
 ( )

586 
Msg_t
 * 
MsgPå
 ;

587 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcRñó£Req_t
 );

589 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

591 
MsgPå
->
H
.
Id
 = 
API_CC_RELEASE_REQ
 ;

592 
MsgPå
->
B
.
ApiCcRñó£Req
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

593 
MsgPå
->
B
.
ApiCcRñó£Req
.
Cau£1Lí
 = 0;

594 
MsgPå
->
B
.
ApiCcRñó£Req
.
Cau£2Lí
 = 0;

595 
MsgPå
->
B
.
ApiCcRñó£Req
.
U£rU£rLí
 = 0;

596 
	`sxs_Ârötf
–
_MMI
, "MMI send <API_CC_RELEASE_REQ>Åo CC \n");

597 
	`sxs_Ârötf
(
_MMI
,"MMIÑeleaseÑequirest\n") ;

599 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

600 
	}
}

613 
	$mmiRñCm±Req
 ( )

615 
Msg_t
 * 
MsgPå
 ;

616 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_CcRñó£Cm∂tReq_t
 );

618 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

620 
MsgPå
->
H
.
Id
 = 
API_CC_RELEASECMPLT_REQ
 ;

621 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

622 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
Cau£Lí
 = 0;

623 
MsgPå
->
B
.
ApiCcRñó£Cm∂tReq
.
U£rU£rLí
 = 0;

624 
	`sxs_Ârötf
(
_MMI
,"MMI send <API_CC_RELEASECMPLT_REQ>Åo CC \n") ;

625 
	`sxs_Ârötf
(
_MMI
,"MMIÑelease complete \n") ;

626 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

627 
	}
}

639 
	$mmiSt›DtmfReq
()

641 
Msg_t
* 
MsgPå
 ;

642 
u16
 
Lí
 = (
Msg_t
Ë+ (
≠i_CcSt›DTMFReq_t
);

644 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

646 
MsgPå
->
H
.
Id
 = 
API_CC_STOPDTMF_REQ
 ;

647 
MsgPå
->
B
.
ApiCcSt›DTMFReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

648 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

649 
	}
}

661 
	$mmiSèπDtmfReq
()

663 
u32
 
dtmf
;

664 
u8
 
i
;

665 
u16
 
Lí
;

666 
Msg_t
* 
MsgPå
 = 
NULL
;

668 
u8
 
num_Àn
 = 
	`°æí
(
s˚n_¨gv
[0]) ;

670 i‡(
num_Àn
 < 1)

672 
	`sxs_Ârötf
(
_MMI
, "***** Please input dtmfÇumber ***** \n") ;

676 
	`sxs_Ârötf
(
_MMI
, "MMI start DTMF \n") ;

677 
	`sxs_Ârötf
–
_MMI
|
	`TSMAP
(0x1)|
	`TNB_ARG
(1), "DTMF Numbî: %s\n", 
s˚n_¨gv
[0]) ;

679 
i
 = 0; i < 
num_Àn
; i++)

682 
dtmf
 = *(
s˚n_¨gv
[0] + 
i
);

683 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "Thêöpuànumbî KEY is: %c\n", 
dtmf
) ;

685 
Lí
 = (
Msg_t
Ë+ (
≠i_CcSèπDTMFReq_t
);

687 
MsgPå
 = 
	`sxr_MÆloc
(
Lí
);

688 
MsgPå
->
H
.
Id
 = 
API_CC_STARTDTMF_REQ
 ;

689 
MsgPå
->
B
.
ApiCcSèπDTMFReq
.
TI
 = 
CurTI
 | (
ApiTIFœg
 << 3);

690 
MsgPå
->
B
.
ApiCcSèπDTMFReq
.
KeyPªs£d
 = 
dtmf
;

692 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

694 
	`STT_WAIT
(0.2 
SECONDS
);

696 
	`mmiSt›DtmfReq
();

698 
	`STT_WAIT
(1 
SECONDS
);

701 
	`sxs_Ârötf
(
_MMI
, "DTMF complete!\n") ;

702 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_cb.c

29 
	~"sxr_›s.h
"

30 
	~"sxs_io.h
"

31 
	~"sxs_lib.h
"

34 
	~"mmi_msg.h
"

35 
	~"ôf_msg.h
"

37 c⁄° 
u8
 
	gmmi_GsmToPCCP437
 [128] =

67 
	$mmiA˘iv©eCBS
 (
u8
 
ItfTy≥
 )

69 
Msg_t
* 
MsgPå
;

71 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "API Síd SmsCbA˘iv©eReq mesßgê(It‡Ty≥ %u)\n", 
ItfTy≥
);

73 
MsgPå
 = 
	`sxr_MÆloc
 (–
MsgHód_t
 ) + (
≠i_SmsCBA˘iv©eReq_t
));

75 
	`mem£t
(&
MsgPå
->
B
.
ApiSmsCBA˘iv©eReq
.
ItfTy≥
, 0, (
≠i_SmsCBA˘iv©eReq_t
));

77 
MsgPå
->
H
.
Id
 = 
API_SMSCB_ACTIVATE_REQ
;

78 
MsgPå
->
B
.
ApiSmsCBA˘iv©eReq
.
ItfTy≥
 = ItfType;

80 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

82 
	}
}

94 
	$mmiDó˘iv©eCBS
 ()

96 
Msg_t
* 
MsgPå
;

98 
	`sxs_Ârötf
(
_MMI
, "API sends SmsCbDeactivateReq \n");

100 
MsgPå
 = 
	`sxr_MÆloc
 (–
MsgHód_t
 ) + (
≠i_SmsCBDeA˘iv©eReq_t
));

101 
MsgPå
->
H
.
Id
 = 
API_SMSCB_DEACTIVATE_REQ
;

102 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

103 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_misc.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_io.h
"

30 
	~"sxs_lib.h
"

33 
	~"sim_msg.h
"

34 
	~"ôf_msg.h
"

35 
	~"ôf_sim.h
"

36 
	~"ôf_≠i.h
"

37 
	~"mmi_∂mn.h
"

39 
s˚_SëCÆibP¨am
(
u32
 
DacVÆue
, 
u8
 
¶›e
);

41 
u16
 
	$s˚_°¨t
 ( 
u8
 
B™d
 )

43 
Msg_t
 * 
OutMsg
;

45 
	`mmiSèπReq
–
B™d
 ) ;

50 
OutMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
) );

51 
OutMsg
->
H
.
Id
 = 
API_SIM_RESET_REQ
 ;

52 
	`sxs_Ârötf
(
_MMI
, "Send <API_SIM_RESET_REQ> message\n");

53 
	`sxr_Síd
 (
OutMsg
 , 
API_MBX
, 
SXR_SEND_MSG
 );

56 
	}
}

58 
u16
 
	$s˚_°›
 ( 
boﬁ
 
PwrOff
 )

60 
	`mmiSt›Req
–
PwrOff
 ) ;

62 
	}
}

64 
ºi_UpdSimD©a
 ( 
u8
 
EF
, 
u16
 
Of°
, u8 
Nb
, u8 * 
D©a
 );

65 
u16
 
	$sim_Eø£FPlmn
 ( )

67 
u8
 
Tab
[12];

68 
	`sxs_Ârötf
(
_MMI
, "Sim Erase FPlmn\n");

70 
	`mem£t
–
Tab
, 0xFF, 12 );

71 
	`ºi_UpdSimD©a
 ( 
EF_FPLMN
, 0, 12, 
Tab
 ) ;

74 
	}
}

76 
	$s˚_RunAlgo
()

78 
Msg_t
 *
PtMsg
;

79 
u8
 
i
;

81 
	`sxs_Ârötf
(
_MMI
, "SendÑunálgo message\n");

83 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
sim_RunGsmAlgoReq_t
));

85 
PtMsg
->
H
.
Id
 = 
SIM_RUN_GSM_ALGO_REQ
;

87 
i
=0;i<16;i++)

88 
PtMsg
->
B
.
sim_RunGsmAlgoReq
.
R™d
[
i
] = i;

89 
PtMsg
->
B
.
sim_RunGsmAlgoReq
.
SrcMbx
 = 
MMI_MBX
;

91 
	`sxr_Síd
 (
PtMsg
, 
SIM_MBX
, 0);

92 
	}
}

94 
	$s˚_SimSt›
()

96 
Msg_t
 *
PtMsg
;

98 
	`sxs_Ârötf
(
_MMI
, "Send SimStopReq message\n");

100 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
));

101 
PtMsg
->
H
.
Id
 = 
SIM_STOP_REQ
;

103 
	`sxr_Síd
 (
PtMsg
, 
SIM_MBX
, 0);

104 
	}
}

106 
	$ßp_SîülS≥ed
 (
u8
 
Spd
)

108 i‡(
Spd
 == 1)

110 
	`sxs_InôSîül
(
	`SXS_SET_RATE
(
SXS_R1500000
), 
HAL_TRACE_PORT_IDX
, 
SXS_RMT_DBG_CPU_IDX
);

111 
	`sxs_Ârötf
(
_MMI
, "SerialSpeed set SXS_R1500000\n");

115 
	`sxs_InôSîül
(
	`SXS_SET_RATE
(
SXS_R115200
), 
HAL_TRACE_PORT_IDX
, 
SXS_RMT_DBG_CPU_IDX
);

116 
	`sxs_Ârötf
(
_MMI
, "SerialSpeed set SXS_R115200\n");

118 
	}
}

120 
	$s˚_SëCÆibP¨am
(
u32
 
DacVÆue
, 
u8
 
¶›e
)

122 
	`rfd_SëSl›e
(
DacVÆue
, 
¶›e
);

123 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_mm.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_io.h
"

32 
	~"mmi_msg.h
"

33 
	~"ôf_msg.h
"

34 
	~"°t.h
"

45 
u16
 
	$s˚_AâachReq
( )

47 
Msg_t
 * 
MsgPå
 ;

48 
u16
 
Lí
 = –
MsgHód_t
 );

50 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

52 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_PSATTACH_REQ> message\n");

53 
	`sxs_Ârötf
–
_MMI
, "MMIásks APIÅoÜaunchá GPRSáttach\n" );

54 
MsgPå
->
H
.
Id
 = 
API_NW_PSATTACH_REQ
 ;

56 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

58 
STT_END
;

59 
	}
}

71 
u16
 
	$s˚_PsDëachReq
( )

73 
Msg_t
 * 
MsgPå
 ;

74 
u16
 
Lí
 = –
MsgHód_t
 );

76 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

78 
MsgPå
->
H
.
Id
 = 
API_NW_PSDETACH_REQ
 ;

80 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_PSDETACH_REQ> message\n");

81 
	`sxs_Ârötf
–
_MMI
, "MMIásk APIÅo Detach from GPRS\n" );

83 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

85 
STT_END
;

86 
	}
}

98 
	$_≠i_StkSt›Req
 ( 
boﬁ
 
PowîOff
 )

100 
Msg_t
 * 
MsgPå
 ;

101 
u16
 
Lí
 = –
Msg_t
 ) + –
≠i_St›Req_t
 );

103 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

105 
MsgPå
->
H
.
Id
 = 
API_STOP_REQ
;

107 
MsgPå
->
B
.
ApiSt›Req
.
PowîOff
 = PowerOff;

109 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

110 
	}
}

122 
u16
 
	$s˚_StkSt›Req
 ( )

124 
	`sxs_Ârötf
–
_MMI
, "MMIáskÅo stopÅhe stack withoutÖower off\n");

125 
	`_≠i_StkSt›Req
 (
FALSE
);

126 
STT_END
;

127 
	}
}

138 
u16
 
	$s˚_StkSt›ReqPowîOff
 ( )

140 
	`sxs_Ârötf
–
_MMI
, "MMIáskÅo stopÅhe stack withÖower off\n" );

141 
	`_≠i_StkSt›Req
 (
TRUE
);

142 
STT_END
;

143 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_plmn.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_lib.h
"

30 
	~"sxs_io.h
"

33 
	~"mmi_msg.h
"

34 
	~"ôf_msg.h
"

46 
	$mmiPlmnLi°Req
 ( )

48 
Msg_t
 * 
MsgPå
 ;

50 
MsgPå
 = 
	`sxr_MÆloc
––
Msg_t
 )) ;

51 
MsgPå
->
H
.
Id
 = 
API_NW_LIST_REQ
 ;

52 
	`sxs_Ârötf
(
_MMI
, "Send <API_NW_LIST_REQ> message\n");

53 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
) ;

54 
	}
}

66 
	$mmiPlmnSñReq
 ( 
u8
 
P1
, u8 
P2
, u8 
P3
 )

68 
Msg_t
 * 
MsgPå
 ;

70 
MsgPå
 = 
	`sxr_MÆloc
––
Msg_t
 ) ) ;

71 
MsgPå
->
H
.
Id
 = 
API_NW_SEL_REQ
 ;

72 
	`sxs_Ârötf
(
_MMI
, "Send <API_NW_SEL_REQ> message\n");

73 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(3), "thêPLMN ID i†%x %x %x\n",
P1
,
P2
,
P3
);

74 
MsgPå
->
B
.
ApiNwSñReq
.
PlmnId
[0] = 
P1
 ;

75 
MsgPå
->
B
.
ApiNwSñReq
.
PlmnId
[1] = 
P2
 ;

76 
MsgPå
->
B
.
ApiNwSñReq
.
PlmnId
[2] = 
P3
 ;

78 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
) ;

79 
	}
}

91 
	$mmiSt›Req
 ( 
boﬁ
 
PowîOff
 )

93 
Msg_t
 * 
MsgPå
 ;

95 
MsgPå
 = 
	`sxr_MÆloc
––
Msg_t
 ) ) ;

96 
MsgPå
->
H
.
Id
 = 
API_STOP_REQ
 ;

97 
	`sxs_Ârötf
(
_MMI
, "Send <API_STOP_REQ> message\n");

98 
MsgPå
->
B
.
ApiSt›Req
.
PowîOff
 = PowerOff ;

99 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
) ;

100 
	}
}

113 
	$mmiSèπReq
 ( 
u8
 
B™d
 )

115 
Msg_t
 * 
MsgPå
 ;

117 
MsgPå
 = 
	`sxr_MÆloc
––
Msg_t
 ) ) ;

118 
MsgPå
->
H
.
Id
 = 
API_START_REQ
 ;

120 
	`sxs_Ârötf
(
_MMI
, "Send <API_START_REQ> message\n");

122 
MsgPå
->
B
.
ApiSèπReq
.
B™d
 = Band ;

124 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
) ;

125 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_rr.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_io.h
"

31 
	~"°t.h
"

34 
	~"mmi_msg.h
"

35 
	~"ôf_msg.h
"

47 
	$s˚_NwSñReq
–
u8
 
›î©‹_id
)

49 
Msg_t
 * 
MsgPå
 ;

50 
u16
 
Lí
 = –
MsgHód_t
 ) + (
≠i_NwSñReq_t
);

51 
u8
 
PlmnId
[3];

53 
PlmnId
[0] = 0x64 ;

54 
PlmnId
[1] = 0xF0 ;

56 
›î©‹_id
)

59 
PlmnId
[2] = 0x00 ;

62 
PlmnId
[2] = 0x10 ;

65 
PlmnId
[2] = 0x20 ;

68 
PlmnId
[2] = 0x60 ;

71 
PlmnId
[2] = 0x70 ;

74 
	`sxs_Ârötf
–
_MMI
, "Invalid PLMN Id!!!\n");

78 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_SEL_REQ> message\n");

79 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(3), "PLMN IdÑequested: 0x%02X 0x%02X 0x%02X\n",

80 
PlmnId
[0], PlmnId[1], PlmnId[2] );

82 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

84 
MsgPå
->
H
.
Id
 = 
API_NW_SEL_REQ
;

85 
	`mem˝y
(&
MsgPå
->
B
.
ApiNwSñReq
.
PlmnId
, &PlmnId, 3);

87 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

88 
	}
}

103 
	$s˚_PlmnLi°Req
 ( )

105 
Msg_t
 * 
MsgPå
 ;

107 
MsgPå
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
) );

109 
MsgPå
->
H
.
Id
 = 
API_NW_LIST_REQ
 ;

111 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_LIST_REQ> message\n");

113 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

115 
	}
}

130 
	$s˚_SñModeReq
–
u8
 
Mode
 )

132 
Msg_t
 * 
MsgPå
 ;

134 
MsgPå
 = 
	`sxr_MÆloc
 ( (
Msg_t
 ));

136 
MsgPå
->
H
.
Id
 = 
API_NW_SELMODE_REQ
 ;

137 
MsgPå
->
B
.
ApiSñModeReq
.
Mode
 = Mode ;

139 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_SELMODE_REQ> message\n");

140 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "thêPLMN sñe˘i⁄ modêi†%d\n", 
Mode
 );

142 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

143 
	}
}

157 
	$s˚_NWRe£lReq
( )

159 
Msg_t
 * 
MsgPå
 ;

161 
MsgPå
 = 
	`sxr_MÆloc
 ( (
Msg_t
 ));

163 
MsgPå
->
H
.
Id
 = 
API_NW_RESEL_REQ
 ;

165 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_NW_RESEL_REQ> message\n");

167 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

168 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_scen.c

26 
	~"sxs_ty≥.h
"

27 
	~"sxs_lib.h
"

28 
	~"sxs_io.h
"

29 
	~"sxr_›s.h
"

30 
	~"°t.h
"

32 
	~"cmn_defs.h
"

33 
	~"ôf_≠i.h
"

35 
	~"mmi_ˇŒ.h
"

36 
	~"mmi_mm.h
"

37 
	~"mmi_º.h
"

38 
	~"mmi_∂mn.h
"

39 
	~"mmi_cb.h
"

40 
	~"mmi_sim.h
"

41 
	~"mmi_ss.h
"

42 
	~"mmi_misc.h
"

43 
	~"mmi_voi˚.h
"

45 #ifde‡
__GPRS__


46 
	~"mmi_sm.h
"

47 
	~"mmi_¢d.h
"

50 
u16
 
	$s˚_DoNŸhög
 ( )

53 
	}
}

55 
°t_S˚n_t
 
	g°ack_SâS˚n
 [] =

57 {(
u16
 (*)())
s˚_°¨t
, "Sèπ Sèck (DeÁu… b™d: GSM_900P)", "0x4", "B™d vÆue:\nGSM_900P: 1 << 2\nGSM_900E: 1 << 3\nGSM_850: 1 << 5\nDCS_1800: 1 << 6\nPCS_1900: 1 << 7", 
NULL
},

58 {(
u16
 (*)())
s˚_°›
, "St› Sèck (DeÁu…: Powî off)", "1", "Powî Off: 1\nNŸÖowî off: 0", 
NULL
},

60 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

62 {(
u16
 (*)())
s˚_ˇŒ
, "MO CÆ»Sèπ (DeÁu… Ph⁄êNb: 112)", "112", "Ph⁄êNb", 
NULL
},

63 {(
u16
 (*)())
mmiC⁄√˘
, "MT CÆ»C⁄√˘", "", "AcknowÀdgê™ incomög cÆl", 
NULL
},

64 {(
u16
 (*)())
mmiSèπDtmfReq
 , "Sèπ DTMF", "", "Exãnsi⁄ Numbî", 
NULL
},

66 {(
u16
 (*)())
mmiDiscReq
, "Disc⁄√˘ÅhêˇŒ", "", "Rñó£ÅhêˇŒ", 
NULL
},

68 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

70 {(
u16
 (*)())
mmi_audioSëVﬁume
 , "Së Vﬁumê(DeÁu…: 16)", "16", "VﬁumêvÆue:0-35 ", 
NULL
},

71 {(
u16
 (*)())
mmi_audioSëVoi˚Muã
 , "Së Voi˚ Muã", "", "", 
NULL
},

72 {(
u16
 (*)())
mmi_audioSëVoi˚UnMuã
 , "Së Voi˚ UnMuã", "", "", 
NULL
},

73 {(
u16
 (*)())
mmi_audioSëVoi˚Gaö
 , "Së Voi˚ Gaö (DeÁu…: 3)", "3", "Gaö vÆue: 1-5", 
NULL
},

75 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

77 {(
u16
 (*)())
s˚_PlmnLi°Req
, "PLMN Li° Req", "", "Nÿ∑ømãr", 
NULL
},

78 {(
u16
 (*)())
s˚_NwSñReq
, "PLMN Sñe˘i⁄ (DeÁu…: CMCC 0)", "0", "0: CMCC (0x64 0xF0 0x00)\n1: CUCC (0x64 0xF0 0x10)\n2: CMCC (0x64 0xF0 0x20)\n6: CUCC (0x64 0xF0 0x60)\n7: CMCC (0x64 0xF0 0x70)\n", 
NULL
},

79 {(
u16
 (*)())
s˚_NWRe£lReq
, "PLMN Re£À˘i⁄ Req ", "", "Nÿ∑ømãr", 
NULL
},

80 {(
u16
 (*)())
s˚_SñModeReq
, "PLMN ModêAuto/M™uÆ (DeÁu…: Auto)", "0", "Auto: 0 \nM™uÆ: 1", 
NULL
},

84 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

86 #ifde‡
__GPRS__


87 {(
u16
 (*)())
s˚_AâachReq
, "GPRS Aâach", "", "Nÿ∑ømãr", 
NULL
},

88 {(
u16
 (*)())
s˚_PsDëachReq
, "GPRS Dëach", "", "Nÿ∑ømãr", 
NULL
},

89 {(
u16
 (*)())
mmiA˘iv©ePdpCtx
, "PDP C⁄ãxàA˘iv©i⁄–DeÁu… PdpCtxNb: 14)", "14", "Pd∞C⁄ãxànumbî (1Åÿ14)", 
NULL
},

90 {(
u16
 (*)())
mmiDó˘iv©ePdpCtx
, "PDP C⁄ãxàDó˘iv©i⁄", "", "Nÿ∑ømãr", 
NULL
},

91 {(
u16
 (*)())
mmiPdpModifyAcc
, "PDP C⁄ãxàModify Ac˚±", "", "Nÿ∑ømãr", 
NULL
},

92 {(
u16
 (*)())
≠i_SídReqQueue
, "Síd U«ck SNDCP D©a\nDeÁu… PDU Nb: 1\nDeÁu… PDU Size: 10", "1 10", "Nb PDU†(1Åÿ999)\nPDU sizê(1Åÿ5000)", 
NULL
},

93 {(
u16
 (*)())
≠i_SídReqQueue2
, "Síd Ack SNDCP D©a\nDeÁu… PDU Nb: 1\nDeÁu… PDU Size: 10", "1 10", "Nb PDU†(1Åÿ999)\nPDU sizê(1Åÿ150)", 
NULL
},

94 {(
u16
 (*)())
≠i_SídReqQueue_V¨Size
, "V¨SizêPDU síd(⁄êtimêthªêPDUs,fú° PDU:1560,£c⁄d PDU:440,thúd PDU:20)", "1", "numbî síd: 1-255", 
NULL
},

97 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

99 {(
u16
 (*)())
mmi_SèπPœyMusic
, "SèπÅÿPœy Music", "", "", 
NULL
},

100 {(
u16
 (*)())
mmi_St›PœyMusic
, "St›ÅÿPœy Music", "", "", 
NULL
},

102 {(
u16
 (*)())
s˚_SëCÆibP¨am
, "Së CÆibøti⁄ P¨amëî\nDeÁu… vÆue\nDAC:0x663\nSl›e:105", "0x663 105", "Fú°: DAC\nSec⁄d: Sl›e", 
NULL
},

104 {(
u16
 (*)())
sxr_CheckHóp
, "Check Hóp.", "", "Nÿ∑ømãr", 
NULL
},

105 {(
u16
 (*)())
sxr_CheckClu°î
, "Check Clu°î.", "", "Nÿ∑ømãr", 
NULL
},

107 {(
u16
 (*)())
sxr_CheckSbx
, "Check Sbx.", "", "Nÿ∑ømãr", 
NULL
},

108 {(
u16
 (*)())
sxr_CheckTimî
, "Check Timî.", "", "Nÿ∑ømãr", 
NULL
},

109 {(
u16
 (*)())
sxr_CheckJob
, "Check Jobs.", "", "Nÿ∑ømãr", 
NULL
},

110 {(
u16
 (*)())
sxr_CheckTask
, "Check Tasks.", "", "Nÿ∑ømãr", 
NULL
},

111 {(
u16
 (*)())
sxr_CheckAŒQueues
, "Check Queues.", "", "Nÿ∑ømãr", 
NULL
},

112 {(
u16
 (*)())
sxr_CheckMemTøckî
, "Check Mem‹yÅøckî.", "", "Nÿ∑ømãr", 
NULL
},

113 {(
u16
 (*)())
sxr_Tø˚Sbx
, "Tø˚ Sbx", "0 0", "Sbx Idx\nE«bÀ\n", 
NULL
},

120 {(
u16
 (*)())
sim_Eø£FPlmn
, "Sim Eø£ FPlmn", "", "Nÿ∑ømãr", 
NULL
},

122 {
s˚_DoNŸhög
, "", "", "", 
NULL
},

124 {(
u16
 (*)())
s˚_GŸoSimS˚n
, "GÿtÿSIM S˚«rios","", "Nÿ∑ømãr", 
NULL
},

127 
°t_S˚n_t
 
	gsim_SâS˚n
 [] =

129 {(
u16
 (*)())
s˚_Re£tSim
, "Re£àsim" ," " ,"Nÿ∑ømã∏",
NULL
},

130 {(
u16
 (*)())
s˚_RódAŒSimFûe
, "RódáŒ sim fûe" ,"0" ,"\nRódáŒ sim fûe\n\nP¨1: Fûênumbî",
NULL
},

131 {(
u16
 (*)())
s˚_Upd©eBö¨ySim
, "Upd©êbö¨y sim" ,"16 0 0 9" ,"\nFû»fûêwôh o√ byã\n\nP¨1: Fûênumbî\nP¨2: ByãÅÿwrôe\nP¨3: Off£à(⁄êbyã)\nP¨4: Nb byã†tÿwrôe\n",
NULL
},

132 {(
u16
 (*)())
s˚_RódBö¨ySim
, "Ród bö¨y sim" ,"16 9" ,"\nRódá bö¨y fûê© off£à0\n\nP¨1: Fûênumbî\nP¨2: Numbî o‡byã†tÿªad ",
NULL
},

133 {(
u16
 (*)())
s˚_RódRec‹dSim
, "RódÑec‹d sim" ,"2 1 176" ,"\n\nP¨1: Fûênumbî\nP¨2: Rec‹dÇumbî\nP¨3: Rec‹d size",
NULL
},

134 {(
u16
 (*)())
s˚_Upd©eRec‹dSim
, "Upd©êªc‹d sim" ,"2 1 176 0 255" ,"\n\nP¨1: Fûênumbî\nP¨2: Rec‹dÇumbî\nP¨3: Rec‹d size\nP¨4: Fú° byã\nP¨5: Fﬁlowög byã (* (n-1))",
NULL
},

135 {(
u16
 (*)())
s˚_DedicFûeSètus
, "Dedi¯Fûê°©u†sim" ,"0" ,"\nP¨amëî:Çumbî o‡thêdediˇãd fûê(de‡vÆuê16 = EF_IMSIË",
NULL
},

136 {(
u16
 (*)())
s˚_EÀmFûeSètus
, "EÀm Fûê°©u†sim" ,"16" ,"\nP¨amëî:Çumbî o‡thêñemíèry fûê(de‡vÆuê0)",
NULL
},

137 {(
u16
 (*)())
s˚_RunAlgo
, "Ru¿Ægÿsim" ," " ,"\nNÿ∑ømëî (fixed vÆuê0 i†u£d)",
NULL
},

138 {(
u16
 (*)())
s˚_E«bÀCHV
, "E«bÀ CHV Sim" ,"1 2 3 4" ,"\n\nP¨1: chv1 codê’ö codeË4 byã†\n(deÁu… vÆuê0 0 0 0)",
NULL
},

139 {(
u16
 (*)())
s˚_VîifyCHV
, "Vîify CHV Sim" ,"1 2 3 4" ,"\n\nP¨1: chv1 codê’ö codeË4 byã†\n(deÁu… vÆuê0 0 0 0)",
NULL
},

140 {(
u16
 (*)())
s˚_Ch™geCHV
, "Ch™gêCHV Sim" ,"1 2 3 4" ,"\n\nP¨1: old chv1 codê’ö codeË4 byãs\nP¨2:Çew chv1 codê4 byãs\n(deÁu… vÆuê0 0 0 0ánd 0 0 0 0Ë",
NULL
},

141 {(
u16
 (*)())
s˚_DißbÀCHV
, "DißbÀ CHV Sim" ,"1 2 3 4" ,"\n\nP¨1: chv1 codê’ö codeË4 byã†\n(deÁu… vÆuê0 0 0 0)",
NULL
},

144 {(
u16
 (*)())
s˚_InvÆid©e
, "InvÆid©êsim fûe" ,"16" ,"\n\nP¨1: Fûênumbî",
NULL
},

145 {(
u16
 (*)())
s˚_Rehabûô©e
, "Rehabûô©êsim fûe" ,"16" ,"\n\nP¨1: Fûênumbî",
NULL
},

146 {(
u16
 (*)())
s˚_Profûe
, "TîmöÆÖrofûe" ," " ,"Nÿ∑ømëî" ,
NULL
},

148 {(
u16
 (*)())
s˚_SimSt›
, "St› Sim" ," " ,"Nÿ∑ømëî", 
NULL
},

149 {(
u16
 (*)())
s˚_Rëu∫MaöS˚n
, "Rãu∫ÅÿMaö Se˙¨ios", " " , "", 
NULL
},

164 
°t_P¨am_t
 
	g°tP¨am
 =

166  ( 
°ack_SâS˚n
 ) /  ( 
°t_S˚n_t
 ),

167 
°ack_SâS˚n
,

172 
°t_InôR•
 ( 
°t_P¨am_t
 * 
P¨am
 );

174 
	$s˚_GŸoSimS˚n
 ()

176 
	`°t_FªeP¨am
 (&
°tP¨am
);

178 
°tP¨am
.
S˚nNb
 =  ( 
sim_SâS˚n
 ) /  ( 
°t_S˚n_t
 );

179 
°tP¨am
.
S˚nLi°
 = 
sim_SâS˚n
;

180 
°tP¨am
.
EvtNb
 = 0;

181 
°tP¨am
.
EvtFuncLi°
 = 
NULL
;

183 
	`°t_InôR•
 (&
°tP¨am
);

185 
	}
}

198 
	$s˚_Rëu∫MaöS˚n
 ()

200 
	`°t_FªeP¨am
 (&
°tP¨am
);

202 
°tP¨am
.
S˚nNb
 =  ( 
°ack_SâS˚n
 ) /  ( 
°t_S˚n_t
 );

203 
°tP¨am
.
S˚nLi°
 = 
°ack_SâS˚n
;

204 
°tP¨am
.
EvtNb
 = 0;

205 
°tP¨am
.
EvtFuncLi°
 = 
NULL
;

207 
	`°t_InôR•
 (&
°tP¨am
);

209 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_sim.c

14 
	~"sxs_ty≥.h
"

15 
	~"sxs_io.h
"

16 
	~"sxr_›s.h
"

17 
	~"sxs_lib.h
"

19 
	~"mmi_msg.h
"

20 
	~"ôf_msg.h
"

21 
	~"ôf_≠i.h
"

23 
	~"hÆ_sim.h
"

25 
	~"°t.h
"

26 
	~"ôf_sim.h
"

28 
boﬁ
 
	gmmiRódE¡úeBö¨y
;

29 
u8
 
	gmmiRódE¡úeBö¨yFûeNb
;

30 
u8
 
	gmmiRódE¡úeBö¨yFûeSize
;

32 
	$s˚_Re£tSim
()

34 
Msg_t
 *
PtMsg
;

36 
	`sxs_Ârötf
(
_MMI
,"SendÑeset sim message\n");

38 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
));

39 
PtMsg
->
H
.
Id
 = 
API_SIM_RESET_REQ
;

40 
	`hÆ_SimPowîDown
();

42 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

43 
	}
}

45 
	$s˚_Upd©eBö¨ySim
()

47 
Msg_t
 *
PtMsg
;

48 
u8
 
i
;

50 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimUpd©eBö¨yReq_t
));

52 
PtMsg
->
H
.
Id
 = 
API_SIM_UPDATEBINARY_REQ
;

53 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
NbByãs
 = 
	`©oi
(
s˚n_¨gv
[3]);

55 
i
=0;i<
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
NbByãs
;i++)

56 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
D©a
[
i
] = 
	`©oi
(
s˚n_¨gv
[1]);

58 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
Off£t
 = 
	`©oi
(
s˚n_¨gv
[2]);

60 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
Fûe
 = 
	`©oi
(
s˚n_¨gv
[0]);

61 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_UPDATEBINARY_REQ> message\n");

62 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(3), "Send update binary message file:%d,Çb byte:%d, offset:%d\n",

63 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
Fûe
,PtMsg->B.ApiSimUpd©eBö¨yReq.
NbByãs
,

64 
PtMsg
->
B
.
ApiSimUpd©eBö¨yReq
.
Off£t
);

66 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

67 
	}
}

69 
	$s˚_RódBö¨ySim
()

71 
Msg_t
 *
PtMsg
;

72 
u8
 
FûeNb
;

73 
u8
 
NbByã
;

75 i‡(
mmiRódE¡úeBö¨y
 =
FALSE
)

77 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

78 
NbByã
 = 
	`©oi
(
s˚n_¨gv
[1]);

82 
FûeNb
 = 
mmiRódE¡úeBö¨yFûeNb
;

83 
NbByã
 = 
mmiRódE¡úeBö¨yFûeSize
;

86 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_READBINARY_REQ> message\n");

88 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2), "SídÑód bö¨y mesßgêFûe:%d NbByã:%d\n",
FûeNb
,
NbByã
);

90 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimRódBö¨yReq_t
));

91 
PtMsg
->
H
.
Id
 = 
API_SIM_READBINARY_REQ
;

93 
PtMsg
->
B
.
ApiSimRódBö¨yReq
.
Off£t
 = 0;

94 
PtMsg
->
B
.
ApiSimRódBö¨yReq
.
NbByãs
 = 
NbByã
;

95 
PtMsg
->
B
.
ApiSimRódBö¨yReq
.
Fûe
 = 
FûeNb
;

97 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

98 
	}
}

100 
	$s˚_RódRec‹dSim
()

102 
Msg_t
 *
PtMsg
;

103 
u8
 
FûeNb
;

104 
u8
 
Rec‹dNb
;

105 
u8
 
Rec‹dSize
;

107 i‡(
mmiRódE¡úeBö¨y
 =
FALSE
)

109 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

110 
Rec‹dNb
 = 
	`©oi
(
s˚n_¨gv
[1]);

111 
Rec‹dSize
 = 
	`©oi
(
s˚n_¨gv
[2]);

115 
FûeNb
 = 
mmiRódE¡úeBö¨yFûeNb
;

116 
Rec‹dNb
 = 1;

117 
Rec‹dSize
 = 
mmiRódE¡úeBö¨yFûeSize
;

119 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_READRECORD_REQ> message\n");

120 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(3), "SídÑódÑec‹d mesßgêFûe:%d Rec‹dNb:%d Rec‹dSize:%d\n",
FûeNb
,
Rec‹dNb
,
Rec‹dSize
 );

122 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimRódRec‹dReq_t
));

123 
PtMsg
->
H
.
Id
 = 
API_SIM_READRECORD_REQ
;

124 
PtMsg
->
B
.
ApiSimRódRec‹dReq
.
Fûe
 = 
FûeNb
;

125 
PtMsg
->
B
.
ApiSimRódRec‹dReq
.
Rec‹dNb
 = RecordNb;

126 
PtMsg
->
B
.
ApiSimRódRec‹dReq
.
Mode
 = 4;

127 
PtMsg
->
B
.
ApiSimRódRec‹dReq
.
NbByã
 = 
Rec‹dSize
;

129 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

130 
	}
}

132 
	$s˚_Upd©eRec‹dSim
()

134 
Msg_t
 *
PtMsg
;

135 
u8
 
FûeNb
;

136 
u8
 
Rec‹dNb
;

137 
u8
 
Rec‹dSize
;

138 
u8
 
Fú°Byã
;

139 
u8
 
FﬁlowögByã
;

140 
u8
 
i
;

142 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

143 
Rec‹dNb
 = 
	`©oi
(
s˚n_¨gv
[1]);

144 
Rec‹dSize
 = 
	`©oi
(
s˚n_¨gv
[2]);

145 
Fú°Byã
 = 
	`©oi
(
s˚n_¨gv
[3]);

146 
FﬁlowögByã
 = 
	`©oi
(
s˚n_¨gv
[4]);

148 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_UPDATERECORD_REQ> message\n");

149 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(3), "Síd upd©êªc‹d mesßgêFûe:%d Rec‹dNb:%d Rec‹dSize:%d\n",
FûeNb
,
Rec‹dNb
,
Rec‹dSize
 );

151 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimUpd©eRec‹dReq_t
));

152 
PtMsg
->
H
.
Id
 = 
API_SIM_UPDATERECORD_REQ
;

153 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
Fûe
 = 
FûeNb
;

154 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
Rec‹dNb
 = RecordNb;

155 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
Mode
 = 4;

156 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
NbByã
 = 
Rec‹dSize
;

157 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
D©a
[0] = 
Fú°Byã
;

158 
i
=1; i<
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
NbByã
; i++)

159 
PtMsg
->
B
.
ApiSimUpd©eRec‹dReq
.
D©a
[
i
] = 
FﬁlowögByã
;

161 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

162 
	}
}

164 
	$s˚_RódAŒSimFûe
()

166 
Msg_t
 *
PtMsg
;

167 
u8
 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

169 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_ELEMFILESTATUS_REQ> message\n");

170 
	`sxs_Ârötf
(
_MMI
, "readÉntire binary message\n" );

171 if(
mmiRódE¡úeBö¨y
 =
FALSE
)

173 
mmiRódE¡úeBö¨y
 = 
TRUE
;

174 
mmiRódE¡úeBö¨yFûeNb
 = 
FûeNb
;

176 if(
mmiRódE¡úeBö¨yFûeNb
 < (
NB_ELEM_FILE
-1))

178 
mmiRódE¡úeBö¨yFûeNb
++;

182 
	`sxs_Ârötf
(
_SIM
,"FileÇumberÉrror!");

185 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimEÀmFûeSètusReq_t
));

186 
PtMsg
->
H
.
Id
 = 
API_SIM_ELEMFILESTATUS_REQ
;

187 
PtMsg
->
B
.
ApiSimEÀmFûeSètusReq
.
Fûe
 = 
mmiRódE¡úeBö¨yFûeNb
;

189 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

190 
	}
}

192 
	$s˚_DedicFûeSètus
()

194 
Msg_t
 *
PtMsg
;

195 
u8
 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

197 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_DEDICFILESTATUS_REQ> message\n");

198 
	`sxs_Ârötf
(
_MMI
 , "Send dedicated file status message\n" );

200 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimDedicFûeSètusReq_t
));

201 
PtMsg
->
H
.
Id
 = 
API_SIM_DEDICFILESTATUS_REQ
;

202 
PtMsg
->
B
.
ApiSimDedicFûeSètusReq
.
Fûe
 = 
FûeNb
;

204 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

205 
	}
}

207 
	$s˚_EÀmFûeSètus
()

209 
Msg_t
 *
PtMsg
;

210 
u8
 
FûeNb
 = 
	`©oi
(
s˚n_¨gv
[0]);

212 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_ELEMFILESTATUS_REQ> message\n");

213 
	`sxs_Ârötf
(
_MMI
, "SendÉlem file status message\n" );

215 
mmiRódE¡úeBö¨y
 = 
FALSE
;

217 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimEÀmFûeSètusReq_t
));

218 
PtMsg
->
H
.
Id
 = 
API_SIM_ELEMFILESTATUS_REQ
;

219 
PtMsg
->
B
.
ApiSimEÀmFûeSètusReq
.
Fûe
 = 
FûeNb
;

221 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

222 
	}
}

224 
	$s˚_VîifyCHV
()

226 
Msg_t
 *
PtMsg
;

227 
u8
 
i
;

228 
u8
 
CHV_Byã0
 = 
	`©oi
(
s˚n_¨gv
[0]);

229 
u8
 
CHV_Byã1
 = 
	`©oi
(
s˚n_¨gv
[1]);

230 
u8
 
CHV_Byã2
 = 
	`©oi
(
s˚n_¨gv
[2]);

231 
u8
 
CHV_Byã3
 = 
	`©oi
(
s˚n_¨gv
[3]);

233 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_VERIFYCHV_REQ> message\n");

234 
	`sxs_Ârötf
(
_MMI
, "Send verify chv message\n" );

236 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimVîifyCHVReq_t
));

237 
PtMsg
->
H
.
Id
 = 
API_SIM_VERIFYCHV_REQ
;

239 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVVÆue
[0] = 48 + 
CHV_Byã0
;

240 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVVÆue
[1] = 48 + 
CHV_Byã1
;

241 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVVÆue
[2] = 48 + 
CHV_Byã2
;

242 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVVÆue
[3] = 48 + 
CHV_Byã3
;

243 
i
=4;i<8;i++)

244 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVVÆue
[
i
]=0xFF;

245 
PtMsg
->
B
.
ApiSimVîifyCHVReq
.
CHVNumbî
 = 1;

247 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

248 
	}
}

250 
	$s˚_DißbÀCHV
()

252 
Msg_t
 *
PtMsg
;

253 
u8
 
i
;

254 
u8
 
CHV_Byã0
 = 
	`©oi
(
s˚n_¨gv
[0]);

255 
u8
 
CHV_Byã1
 = 
	`©oi
(
s˚n_¨gv
[1]);

256 
u8
 
CHV_Byã2
 = 
	`©oi
(
s˚n_¨gv
[2]);

257 
u8
 
CHV_Byã3
 = 
	`©oi
(
s˚n_¨gv
[3]);

259 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_DISABLECHV_REQ> message\n");

260 
	`sxs_Ârötf
(
_MMI
, "Send disable chv message\n" );

262 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimDißbÀCHVReq_t
));

263 
PtMsg
->
H
.
Id
 = 
API_SIM_DISABLECHV_REQ
;

264 
PtMsg
->
B
.
ApiSimDißbÀCHVReq
.
CHVVÆue
[0] = 48 + 
CHV_Byã0
;

265 
PtMsg
->
B
.
ApiSimDißbÀCHVReq
.
CHVVÆue
[1] = 48 + 
CHV_Byã1
;

266 
PtMsg
->
B
.
ApiSimDißbÀCHVReq
.
CHVVÆue
[2] = 48 + 
CHV_Byã2
;

267 
PtMsg
->
B
.
ApiSimDißbÀCHVReq
.
CHVVÆue
[3] = 48 + 
CHV_Byã3
;

268 
i
=4;i<8;i++)

269 
PtMsg
->
B
.
ApiSimDißbÀCHVReq
.
CHVVÆue
[
i
]=0xFF;

271 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

272 
	}
}

274 
	$s˚_E«bÀCHV
()

276 
Msg_t
 *
PtMsg
;

277 
u8
 
i
;

278 
u8
 
CHV_Byã0
 = 
	`©oi
(
s˚n_¨gv
[0]);

279 
u8
 
CHV_Byã1
 = 
	`©oi
(
s˚n_¨gv
[1]);

280 
u8
 
CHV_Byã2
 = 
	`©oi
(
s˚n_¨gv
[2]);

281 
u8
 
CHV_Byã3
 = 
	`©oi
(
s˚n_¨gv
[3]);

283 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_ENABLECHV_REQ> message\n");

284 
	`sxs_Ârötf
(
_MMI
, "SendÉnable chv message\n");

286 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimE«bÀCHVReq_t
));

287 
PtMsg
->
H
.
Id
 = 
API_SIM_ENABLECHV_REQ
;

288 
PtMsg
->
B
.
ApiSimE«bÀCHVReq
.
CHVVÆue
[0] = 48 + 
CHV_Byã0
;

289 
PtMsg
->
B
.
ApiSimE«bÀCHVReq
.
CHVVÆue
[1] = 48 + 
CHV_Byã1
;

290 
PtMsg
->
B
.
ApiSimE«bÀCHVReq
.
CHVVÆue
[2] = 48 + 
CHV_Byã2
;

291 
PtMsg
->
B
.
ApiSimE«bÀCHVReq
.
CHVVÆue
[3] = 48 + 
CHV_Byã3
;

292 
i
=4;i<8;i++)

293 
PtMsg
->
B
.
ApiSimE«bÀCHVReq
.
CHVVÆue
[
i
]=0xFF;

295 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

296 
	}
}

298 
	$s˚_Ch™geCHV
()

300 
Msg_t
 *
PtMsg
;

301 
u8
 
i
;

302 
u8
 
OldCHV_Byã0
 = 
	`©oi
(
s˚n_¨gv
[0]);

303 
u8
 
OldCHV_Byã1
 = 
	`©oi
(
s˚n_¨gv
[1]);

304 
u8
 
OldCHV_Byã2
 = 
	`©oi
(
s˚n_¨gv
[2]);

305 
u8
 
OldCHV_Byã3
 = 
	`©oi
(
s˚n_¨gv
[3]);

306 
u8
 
NewCHV_Byã0
 = 
	`©oi
(
s˚n_¨gv
[0]);

307 
u8
 
NewCHV_Byã1
 = 
	`©oi
(
s˚n_¨gv
[1]);

308 
u8
 
NewCHV_Byã2
 = 
	`©oi
(
s˚n_¨gv
[2]);

309 
u8
 
NewCHV_Byã3
 = 
	`©oi
(
s˚n_¨gv
[3]);

311 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_CHANGECHV_REQ> message\n");

312 
	`sxs_Ârötf
(
_MMI
, "Send change chv message\n");

314 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimCh™geCHVReq_t
));

315 
PtMsg
->
H
.
Id
 = 
API_SIM_CHANGECHV_REQ
;

316 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
OldCHVVÆue
[0] = 48 + 
OldCHV_Byã0
;

317 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
OldCHVVÆue
[1] = 48 + 
OldCHV_Byã1
;

318 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
OldCHVVÆue
[2] = 48 + 
OldCHV_Byã2
;

319 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
OldCHVVÆue
[3] = 48 + 
OldCHV_Byã3
;

320 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
CHVNumbî
 = 1;

321 
i
=4;i<8;i++)

322 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
OldCHVVÆue
[
i
]=0xFF;

323 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
NewCHVVÆue
[0] = 48 + 
NewCHV_Byã0
;

324 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
NewCHVVÆue
[1] = 48 + 
NewCHV_Byã1
;

325 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
NewCHVVÆue
[2] = 48 + 
NewCHV_Byã2
;

326 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
NewCHVVÆue
[3] = 48 + 
NewCHV_Byã3
;

327 
i
=4;i<8;i++)

328 
PtMsg
->
B
.
ApiSimCh™geCHVReq
.
NewCHVVÆue
[
i
]=0xFF;

330 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

331 
	}
}

333 
	$s˚_SimToﬁKô
()

335 
Msg_t
 *
PtMsg
;

337 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_STKACTIVATE_REQ> message\n");

338 
	`sxs_Ârötf
(
_MMI
, "Send SimToolKit Req message\n");

340 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
Ë+ (
≠i_SimToﬁkôA˘iv©eReq_t
));

341 
PtMsg
->
H
.
Id
 = 
API_SIM_STKACTIVATE_REQ
;

342 
PtMsg
->
B
.
ApiSimToﬁkôA˘iv©eReq
.
A˘iv©e
 = 1;

344 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

345 
	}
}

347 
	$s˚_Pﬁl
()

349 
Msg_t
 *
PtMsg
;

351 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_POLL_REQ> message\n");

352 
	`sxs_Ârötf
(
_MMI
, "Send SimPollReq message\n");

354 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
)+(
≠i_SimPﬁlReq_t
));

355 
PtMsg
->
H
.
Id
 = 
API_SIM_POLL_REQ
;

356 
PtMsg
->
B
.
ApiSimPﬁlReq
.
Duøti⁄
 = 
	`©oi
(
s˚n_¨gv
[0]);

358 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

359 
	}
}

361 
	$s˚_PﬁlOff
()

363 
Msg_t
 *
PtMsg
;

365 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_POLLOFF_REQ> message\n");

366 
	`sxs_Ârötf
(
_MMI
, "Send SimPollOffReq message\n");

368 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
));

369 
PtMsg
->
H
.
Id
 = 
API_SIM_POLLOFF_REQ
;

371 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

372 
	}
}

374 
	$s˚_InvÆid©e
()

376 
Msg_t
 *
PtMsg
;

378 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_INVALIDATE_REQ> message\n");

379 
	`sxs_Ârötf
(
_MMI
, "Send SimInvalidateReq message\n");

381 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
)+ (
≠i_SimInvÆid©eReq_t
));

382 
PtMsg
->
H
.
Id
 = 
API_SIM_INVALIDATE_REQ
;

384 
PtMsg
->
B
.
ApiSimInvÆid©eReq
.
Fûe
 = 
	`©oi
(
s˚n_¨gv
[0]);

386 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

387 
	}
}

389 
	$s˚_Rehabûô©e
()

391 
Msg_t
 *
PtMsg
;

393 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_REHABILITATE_REQ> message\n");

394 
	`sxs_Ârötf
(
_MMI
, "Send SimRehabilitateReq message");

396 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
)+ (
≠i_SimRehabûô©eReq_t
));

397 
PtMsg
->
H
.
Id
 = 
API_SIM_REHABILITATE_REQ
;

399 
PtMsg
->
B
.
ApiSimRehabûô©eReq
.
Fûe
 = 
	`©oi
(
s˚n_¨gv
[0]);

401 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

402 
	}
}

404 
	$s˚_Profûe
()

406 
Msg_t
 *
PtMsg
;

408 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_SIM_TERMINALPROFILE_REQ> message\n");

409 
	`sxs_Ârötf
(
_MMI
, "Send SimProfileReq message" );

411 
PtMsg
 = 
	`sxr_MÆloc
 ( (
MsgHód_t
)+ (
≠i_SimTîmöÆProfûeReq_t
));

412 
PtMsg
->
H
.
Id
 = 
API_SIM_TERMINALPROFILE_REQ
;

414 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
NbByã
 = 5;

415 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
ProfûeD©a
[0] = 0xFF;

416 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
ProfûeD©a
[1] = 0xFF;

417 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
ProfûeD©a
[2] = 0xFF;

418 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
ProfûeD©a
[3] = 0xFF;

419 
PtMsg
->
B
.
ApiSimTîmöÆProfûeReq
.
ProfûeD©a
[4] = 0xFF;

421 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 0);

422 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_sm.c

29 
	~"sxr_›s.h
"

30 
	~"sxs_io.h
"

31 
	~"sxs_lib.h
"

33 
	~"cmn_defs.h
"

35 #ifde‡
__GPRS__


38 
	~"mmi_msg.h
"

39 
	~"ôf_msg.h
"

41 
	~"mmi_d©a.h
"

56 
u8
 
	gTabQos
[15][17]=

77 
u8
 
	gTabQos
[15][17]=

99 
u8
 
	gmmi_NS≠i
 = 5;

100 
boﬁ
 
	gmmi_NS≠iU£d
 = 
FALSE
;

101 
u8
 
	gmmi_SmIndex
;

102 c⁄° 
ascii
 
	gmmi_A≤Name
[] = "Rockchip";

104 
	$mmiA˘iv©ePdpCtx
 (
u8
 
PdpCtxNb
 )

106 
Msg_t
* 
PtMsg
;

108 
u8
* 
PtQoS
;

110 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_PDP_CTXACTIVATE_REQ> message\n");

111 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(1), "API Síd PdpCtxA˘iv©eReq mesßgêo‡PDP CTX %d\n", 
PdpCtxNb
);

113 i‡(!
mmi_NS≠iU£d
)

115 
PdpCtxNb
--;

116 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eReq_t
) );

117 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXACTIVATE_REQ
;

119 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
SmIndex
 = 0;

120 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
NS≠i
 = 
mmi_NS≠i
;

121 
mmi_NS≠iU£d
 = 
TRUE
;

123 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoSLí
 = 11;

124 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PrŸocﬁCfgO±i⁄Lí
 = 0;

128 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[0] = 
	`°æí
(
mmi_A≤Name
);

129 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 = 
	`°æí
(
mmi_A≤Name
) + 1;

130 
	`°r˝y
(&
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[1], 
mmi_A≤Name
);

133 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 = 0;

135 
PtQoS
 = &
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoS
[0];

136 
PtQoS
[0]((
TabQos
[
PdpCtxNb
][0])<<3) | TabQos[PdpCtxNb][1];

146 
PtQoS
[1]((
TabQos
[
PdpCtxNb
][2])<<4) | TabQos[PdpCtxNb][3];

158 
PtQoS
[2]
TabQos
[
PdpCtxNb
][4];

159 
PtQoS
[3]((
TabQos
[
PdpCtxNb
][5])<<5) | ((TabQos[PdpCtxNb][6])<<3) | (TabQos[PdpCtxNb][7]);

166 
PtQoS
[4]
TabQos
[
PdpCtxNb
][8];

167 
PtQoS
[5]
TabQos
[
PdpCtxNb
][9];

168 
PtQoS
[6]
TabQos
[
PdpCtxNb
][10];

169 
PtQoS
[7]((
TabQos
[
PdpCtxNb
][11])<<4) | (TabQos[PdpCtxNb][12]);

171 
PtQoS
[8]((
TabQos
[
PdpCtxNb
][13])<<2)| TabQos[PdpCtxNb][14];

172 
PtQoS
[9] = 
TabQos
[
PdpCtxNb
][15];

173 
PtQoS
[10]
TabQos
[
PdpCtxNb
][16];

178 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 = 6;

179 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[0] = 0x01;

180 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[1] = 0x21;

181 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[2] = 0xAC;

182 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[3] = 0x44;

183 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[4] = 0xD0;

184 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[5] = 0x45;

186 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

190 
	`sxs_Ârötf
(
_MMI
, "API,álreadyá PDPCtxáctivated\n");

192 
	}
}

206 
	$mmiNwkInôüãdA˘iv©ePdpCtx
 ()

208 
Msg_t
* 
PtMsg
;

209 
u16
 
i
;

210 
u8
* 
PtQoS
;

212 
u8
 
PdpCtxNb
 = 2;

214 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eReq_t
) );

215 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXACTIVATE_REQ
;

217 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
SmIndex
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.SmIndex;

219 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
NS≠i
 = 
mmi_NS≠i
;

221 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoSLí
 = 11;

222 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.PDPAddLen;

223 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.APNLen;

224 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PrŸocﬁCfgO±i⁄Lí
 = 0;

226 
PtQoS
 = &
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoS
[0];

227 
PtQoS
[0]((
TabQos
[
PdpCtxNb
][0])<<3) | TabQos[PdpCtxNb][1];

237 
PtQoS
[1]((
TabQos
[
PdpCtxNb
][2])<<4) | TabQos[PdpCtxNb][3];

249 
PtQoS
[2]
TabQos
[
PdpCtxNb
][4];

250 
PtQoS
[3]((
TabQos
[
PdpCtxNb
][5])<<5) | ((TabQos[PdpCtxNb][6])<<3) | (TabQos[PdpCtxNb][7]);

257 
PtQoS
[4]
TabQos
[
PdpCtxNb
][8];

258 
PtQoS
[5]
TabQos
[
PdpCtxNb
][9];

259 
PtQoS
[6]
TabQos
[
PdpCtxNb
][10];

260 
PtQoS
[7]((
TabQos
[
PdpCtxNb
][11])<<4) | (TabQos[PdpCtxNb][12]);

262 
PtQoS
[8]((
TabQos
[
PdpCtxNb
][13])<<2)| TabQos[PdpCtxNb][14];

263 
PtQoS
[9] = 
TabQos
[
PdpCtxNb
][15];

264 
PtQoS
[10]
TabQos
[
PdpCtxNb
][16];

266  
i
=0 ; i<
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 ; i++ )

267 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[
i
] = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.PDPAddress[i];

269  
i
=0 ; i<
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 ; i++ )

270 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[
i
] = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.AccessPointName[i];

272 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

273 
	}
}

275 
	$mmiNwkInôüãdA˘iv©ePdpCtx
 ()

277 
Msg_t
* 
PtMsg
;

278 
u16
 
i
;

281 i‡–(!
mmi_NS≠iU£d
) ||

282 (
mmi_NS≠iU£d
 && ((
mmi_SmIndex
 & 0x7FË=(
mmi_D©a
.
RecMsg
->
B
.
ApiPdpCtxA˘iv©eInd
.
SmIndex
 & 0x7F)) ))

284 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eReq_t
) );

285 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXACTIVATE_REQ
;

287 
mmi_SmIndex
 = 
mmi_D©a
.
RecMsg
->
B
.
ApiPdpCtxA˘iv©eInd
.
SmIndex
;

288 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
SmIndex
 = 
mmi_SmIndex
;

290 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
NS≠i
 = 
mmi_NS≠i
;

291 
mmi_NS≠iU£d
 = 
TRUE
;

293 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoSLí
 = 11;

294 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.PDPAddLen;

295 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.APNLen;

296 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PrŸocﬁCfgO±i⁄Lí
 = 0;

298 
	`mem£t
(
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoS
, 0, 11);

300 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_PDP_CTXACTIVATE_REQ> message\n");

301 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2), "SmIndex: %d, NS≠i: %d \n",
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
SmIndex
,

302 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
NS≠i
);

304  
i
=0 ; i<
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 ; i++ )

305 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[
i
] = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.PDPAddress[i];

307  
i
=0 ; i<
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 ; i++ )

308 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[
i
] = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.AccessPointName[i];

312 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eRej_t
) );

313 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXACTIVATE_REJ
;

315 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_PDP_CTXACTIVATE_REJ> message\n");

316 
	`sxs_Ârötf
(
_MMI
, "all PDP Ctxáreáctivate\n" );

318 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eRej
.
SmIndex
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxA˘iv©eInd
.SmIndex;

319 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eRej
.
Cau£
 = 0x1F;

320 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eRej
.
PrŸocﬁCfgO±i⁄Lí
 = 0;

323 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

324 
	}
}

338 
	$mmiDó˘iv©ePdpCtx
 ()

340 
Msg_t
* 
PtMsg
;

342 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_PDP_CTXDEACTIVATE_REQ> message\n");

343 
	`sxs_Ârötf
(
_MMI
, "API Send PdpCtxDeacivateReq message\n" );

345 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eReq_t
) );

346 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXDEACTIVATE_REQ
;

348 
PtMsg
->
B
.
ApiPdpCtxDó˘iv©eReq
.
SmIndex
 = 0x0;

349 
PtMsg
->
B
.
ApiPdpCtxDó˘iv©eReq
.
Cau£
 = 0x24;

351 
mmi_NS≠iU£d
 = 
FALSE
;

353 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

354 
	}
}

366 
	$mmiPdpModifyAcc
()

368 
Msg_t
* 
PtMsg
;

370 
	`sxs_Ârötf
–
_MMI
,"MMI send <API_PDP_CTXMODIFY_ACC> message\n");

371 
	`sxs_Ârötf
(
_MMI
, "API Send PdpCtxModifyAcc message\n");

373 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ (
≠i_PdpCtxModifyAcc_t
));

375 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXMODIFY_ACC
;

377 
PtMsg
->
B
.
ApiPdpCtxModifyAcc
.
SmIndex
 = 
mmi_D©a
.
RecMsg
->B.
ApiPdpCtxModifyInd
.SmIndex;

379 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

380 
	}
}

393 
	$mmiA˘iv©ePdpCtxFûeTøns„r
 ()

395 
ascii
 
A≤
[] = "wapsfr";

396 
u8
 
PdpAddr
[4] = { 195, 115, 25, 129 };

397 
u8
 
MyQoS
[17] =

418 
Msg_t
* 
PtMsg
;

419 
u8
 
Lí
;

420 
u8
* 
PtQoS
;

422 
	`sxs_Ârötf
(
_API
|
TDB
,
	`TSTR
("API Send PdpCtxActivateReq for File Transfer",0x038a0005));

423 
PtMsg
 = 
	`sxr_MÆloc
– (
MsgHód_t
Ë+ (
≠i_PdpCtxA˘iv©eReq_t
) );

424 
PtMsg
->
H
.
Id
 = 
API_PDP_CTXACTIVATE_REQ
;

426 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
SmIndex
 = 0;

427 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
NS≠i
 = 
mmi_NS≠i
;

429 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoSLí
 = 11;

430 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PrŸocﬁCfgO±i⁄Lí
 = 0;

433 
Lí
 = 
	`°æí
(
A≤
);

434 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
APNLí
 = 
Lí
+1;

435 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[0] = 
Lí
;

436 
	`mem˝y
(&
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
Ac˚ssPoötName
[1], 
A≤
, 
Lí
);

439 
PtQoS
 = &
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
QoS
[0];

440 
PtQoS
[0]((
MyQoS
[0])<<3) | MyQoS[1];

450 
PtQoS
[1]((
MyQoS
[2])<<4) | MyQoS[3];

462 
PtQoS
[2]
MyQoS
[4];

463 
PtQoS
[3]((
MyQoS
[5])<<5) | ((MyQoS[6])<<3) | (MyQoS[7]);

470 
PtQoS
[4]
MyQoS
[8];

471 
PtQoS
[5]
MyQoS
[9];

472 
PtQoS
[6]
MyQoS
[10];

473 
PtQoS
[7]((
MyQoS
[11])<<4) | (MyQoS[12]);

475 
PtQoS
[8]((
MyQoS
[13])<<2)| MyQoS[14];

476 
PtQoS
[9] = 
MyQoS
[15];

477 
PtQoS
[10]
MyQoS
[16];

481 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 = 2;

482 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[0] = 0x01;

483 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[1] = 0x21;

485 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddLí
 = 6;

486 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[0] = 0x01;

487 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[1] = 0x21;

488 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[2] = 
PdpAddr
[0];

489 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[3] = 
PdpAddr
[1];

490 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[4] = 
PdpAddr
[2];

491 
PtMsg
->
B
.
ApiPdpCtxA˘iv©eReq
.
PDPAddªss
[4] = 
PdpAddr
[3];

493 
	`sxr_Síd
 (
PtMsg
, 
API_MBX
, 
SXR_SEND_MSG
);

494 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_snd.c

28 
	~"sxr_›s.h
"

29 
	~"sxs_io.h
"

31 
	~"cmn_defs.h
"

33 #ifde‡
__GPRS__


36 
	~"mmi_msg.h
"

37 
	~"ôf_msg.h
"

38 
	~"ôf_¢d.h
"

39 
	~"°t.h
"

41 
	#ACK_MODE
 0

	)

42 
	#UNACK_MODE
 1

	)

43 
	#PDU_MAX_SIZE
 5000

	)

44 
	#PDU_DEF_SIZE
 10

	)

45 
	#RAD_OFFS
 12

	)

46 
	#RAD_FOOTER
 3

	)

47 
	#MMI_ILBODY_SIZE
 20

	)

49 
u8
 
mmi_SndQueueId
;

50 
u8
 
mmi_NS≠i
;

64 
	$≠i_SídReqQueue
()

66 
Msg_t
* 
PtMsg
;

67 
u16
 
i
, 
j
, 
PduSize
, 
NbPdu
;

69 i‡(
s˚n_¨gc
 < 2)

71 
PduSize
 = 
PDU_DEF_SIZE
;

72 
NbPdu
 = 1;

76 
PduSize
 = 
	`©oi
(
s˚n_¨gv
[1]);

77 i‡–
PduSize
 > 
PDU_MAX_SIZE
 )

78 
PduSize
 = 
PDU_DEF_SIZE
;

80 
NbPdu
 = 
	`©oi
(
s˚n_¨gv
[0]);

81 i‡–(
NbPdu
 > 999) || (NbPdu == 0) )

82 
NbPdu
 = 1;

85 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2),"%u Block†o‡%u byã†tÿbê£¡ from MMI\n", 
NbPdu
, 
PduSize
);

86 
j
=0; j<
NbPdu
; j++)

88 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2), "MMI Síd D©aReq mesßgê%u/%u\n", 
j
+1, 
NbPdu
);

89 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ 
MMI_ILBODY_SIZE
 +

90 
PduSize
 +

91 
RAD_FOOTER
 +

92 
RAD_OFFS
 );

94 
PtMsg
->
H
.
Id
 = 
SND_SEND_REQ
;

95 
PtMsg
->
B
.
IL
.
D©aLí
 = 
PduSize
 +

96 
RAD_OFFS
 ;

97 
PtMsg
->
B
.
IL
.
D©aOff£t
 = 
RAD_OFFS
;

99 
i
=
PtMsg
->
B
.
IL
.
D©aOff£t
; i<PtMsg->B.IL.
D©aLí
; i++)

100 
PtMsg
->
B
.
IL
.
D©a
[
i
]i-PtMsg->B.IL.
D©aOff£t
;

102 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
NS≠i
 = 
mmi_NS≠i
;

103 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
Mode
 = 
UNACK_MODE
;

105 
	`sxr_P›In
((*)
PtMsg
, 
mmi_SndQueueId
);

108 
u32
 
Evt
 [2];

109 
Evt
 [0] = 
SND_QUEUEDATA_REQ
;

110 
Evt
 [1] = 7;

111 
	`sxr_Síd
 (
Evt
, 
SND_MBX
, 
SXR_SEND_EVT
);

113 
	`STT_WAIT
(1 
SECONDS
);

115 
	}
}

128 
	$≠i_SídReqQueue2
()

130 
Msg_t
* 
PtMsg
;

131 
u16
 
i
, 
j
, 
PduSize
, 
NbPdu
;

133 i‡(
s˚n_¨gc
 < 2)

135 
PduSize
 = 
PDU_DEF_SIZE
;

136 
NbPdu
 = 1;

140 
PduSize
 = 
	`©oi
(
s˚n_¨gv
[1]);

141 i‡–
PduSize
 > 
PDU_MAX_SIZE
 )

142 
PduSize
 = 
PDU_DEF_SIZE
;

144 
NbPdu
 = 
	`©oi
(
s˚n_¨gv
[0]);

145 i‡–(
NbPdu
 > 999) || (NbPdu == 0) )

146 
NbPdu
 = 1;

149 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2), "%u Block†o‡%u byã†tÿbê£¡ from API\n", 
NbPdu
, 
PduSize
);

150 
j
=0; j<
NbPdu
; j++)

152 
	`sxs_Ârötf
(
_MMI
|
	`TNB_ARG
(2), "API Síd D©aReq mesßgê%u/%u\n", 
j
+1, 
NbPdu
);

153 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ 
MMI_ILBODY_SIZE
 +

154 
PduSize
 +

155 
RAD_FOOTER
 +

156 
RAD_OFFS
 );

158 
PtMsg
->
H
.
Id
 = 
SND_SEND_REQ
;

159 
PtMsg
->
B
.
IL
.
D©aLí
 = 
PduSize
 +

160 
RAD_OFFS
 ;

161 
PtMsg
->
B
.
IL
.
D©aOff£t
 = 
RAD_OFFS
;

163 
i
=
PtMsg
->
B
.
IL
.
D©aOff£t
;i<PtMsg->B.IL.
D©aLí
;i++)

164 
PtMsg
->
B
.
IL
.
D©a
[
i
]i-PtMsg->B.IL.
D©aOff£t
;

166 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
NS≠i
 = 
mmi_NS≠i
;

167 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
Mode
 = 
ACK_MODE
;

169 
	`sxr_P›In
((*)
PtMsg
, 
mmi_SndQueueId
);

172 
u32
 
Evt
 [2];

173 
Evt
 [0] = 
SND_QUEUEDATA_REQ
;

174 
Evt
 [1] = 7;

175 
	`sxr_Síd
 (
Evt
, 
SND_MBX
, 
SXR_SEND_EVT
);

177 
	`STT_WAIT
(3 
SECONDS
);

179 
	}
}

194 
	$≠i_SídReqQueue_V¨Size
 (
u8
 
Nb
)

196 
Msg_t
* 
PtMsg
;

197 
u16
 
i
, 
Nb£nd
, 
PduSize
;

199 
Nb£nd
 = 0; Nb£nd < 
Nb
; Nbsend++)

201 
PduSize
 = 1560 ;

202 
	`sxs_Ârötf
(
_MMI
, "1 Block of 1560 bytesÅo be sent from MMI\n");

203 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ 
MMI_ILBODY_SIZE
 +

204 
PduSize
 +

205 
RAD_FOOTER
 +

206 
RAD_OFFS
 );

208 
PtMsg
->
H
.
Id
 = 
SND_SEND_REQ
 ;

209 
PtMsg
->
B
.
IL
.
D©aLí
 = 
PduSize
 +

210 
RAD_OFFS
 ;

211 
PtMsg
->
B
.
IL
.
D©aOff£t
 = 
RAD_OFFS
;

213 
i
=
PtMsg
->
B
.
IL
.
D©aOff£t
;i<PtMsg->B.IL.
D©aLí
;i++)

214 
PtMsg
->
B
.
IL
.
D©a
[
i
]i-PtMsg->B.IL.
D©aOff£t
;

216 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
NS≠i
 = 
mmi_NS≠i
;

217 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
Mode
 = 
UNACK_MODE
;

219 
	`sxr_P›In
((*)
PtMsg
, 
mmi_SndQueueId
);

221 
PduSize
 = 440 ;

222 
	`sxs_Ârötf
(
_MMI
, "1 Block of 440 bytesÅo be sent from MMI\n");

223 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ 
MMI_ILBODY_SIZE
 +

224 
PduSize
 +

225 
RAD_FOOTER
 +

226 
RAD_OFFS
 );

228 
PtMsg
->
H
.
Id
 = 
SND_SEND_REQ
;

229 
PtMsg
->
B
.
IL
.
D©aLí
 = 
PduSize
 +

230 
RAD_OFFS
 ;

231 
PtMsg
->
B
.
IL
.
D©aOff£t
 = 
RAD_OFFS
;

233 
i
=
PtMsg
->
B
.
IL
.
D©aOff£t
; i<PtMsg->B.IL.
D©aLí
; i++)

234 
PtMsg
->
B
.
IL
.
D©a
[
i
]i-PtMsg->B.IL.
D©aOff£t
;

236 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
NS≠i
 = 
mmi_NS≠i
;

237 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
Mode
 = 
UNACK_MODE
;

239 
	`sxr_P›In
((*)
PtMsg
, 
mmi_SndQueueId
);

241 
PduSize
 = 20 ;

242 
	`sxs_Ârötf
(
_MMI
, "1 Block of 20 bytesÅo be sent from MMI\n");

243 
PtMsg
 = 
	`sxr_MÆloc
 (  (
MsgHód_t
Ë+ 
MMI_ILBODY_SIZE
 +

244 
PduSize
 +

245 
RAD_FOOTER
 +

246 
RAD_OFFS
 );

248 
PtMsg
->
H
.
Id
 = 
SND_SEND_REQ
;

249 
PtMsg
->
B
.
IL
.
D©aLí
 = 
PduSize
 +

250 
RAD_OFFS
 ;

251 
PtMsg
->
B
.
IL
.
D©aOff£t
 = 
RAD_OFFS
;

253 
i
=
PtMsg
->
B
.
IL
.
D©aOff£t
;i<PtMsg->B.IL.
D©aLí
;i++)

254 
PtMsg
->
B
.
IL
.
D©a
[
i
]i-PtMsg->B.IL.
D©aOff£t
;

256 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
NS≠i
 = 
mmi_NS≠i
;

257 
PtMsg
->
B
.
IL
.
Hdr
.
S≥cific
.
¢d_SídReq
.
Mode
 = 
UNACK_MODE
;

259 
	`sxr_P›In
((*)
PtMsg
, 
mmi_SndQueueId
);

262 
u32
 
Evt
 [2];

263 
Evt
 [0] = 
SND_QUEUEDATA_REQ
;

264 
Evt
 [1] = 7;

265 
	`sxr_Síd
 (
Evt
, 
SND_MBX
, 
SXR_SEND_EVT
);

268 
	`STT_WAIT
(1 
SECONDS
);

270 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_ss.c

29 
	~"sxr_›s.h
"

30 
	~"sxs_lib.h
"

31 
	~"sxs_io.h
"

34 
	~"mmi_msg.h
"

35 
	~"ôf_msg.h
"

37 
	~"ôf_≠i.h
"

45 
	$mmi_SsTe°_31_3_1_4_ACE
( )

47 
Msg_t
 *
MsgPå
;

48 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

49 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

51 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

52 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CW
;

55 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

56 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

58 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

59 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

61 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

62 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

63 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

64 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

65 
	}
}

69 
	$mmi_SsTe°_31_3_1_4_BDF
( )

71 
Msg_t
 *
MsgPå
;

72 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

73 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

75 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

76 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CW
;

79 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

81 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

82 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

83 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

85 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

86 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

87 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

88 
	}
}

92 
	$mmi_SsTe°_31_3_1_5_ACE
( )

94 
Msg_t
 *
MsgPå
;

95 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

96 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

98 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

99 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CW
;

102 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

103 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

105 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

106 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

107 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

109 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

110 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

111 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

112 
	}
}

116 
	$mmi_SsTe°_31_3_1_5_BDF
( )

118 
Msg_t
 *
MsgPå
;

119 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

120 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

122 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

123 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CW
;

126 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

128 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

129 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

130 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

132 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

133 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

134 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

135 
	}
}

139 
	$mmi_SsTe°_31_3_1_6_1_AB
( )

141 
Msg_t
 *
MsgPå
;

142 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

143 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

145 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

146 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CW
;

149 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlWaôögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

151 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

152 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

153 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

155 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

156 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

157 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

158 
	}
}

165 
	$mmi_SsTe°_31_1_1_2_1
( )

167 
Msg_t
 *
MsgPå
;

168 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

169 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

171 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

172 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CLIP
;

174 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

175 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

176 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

178 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

179 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

180 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

181 
	}
}

185 
	$mmi_SsTe°_31_1_2_3_1
( )

187 
Msg_t
 *
MsgPå
;

188 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

189 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

191 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

192 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CLIR
;

194 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

195 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

196 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

198 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

199 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

200 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

201 
	}
}

205 
	$mmi_SsTe°_31_1_3_2_1
( )

207 
Msg_t
 *
MsgPå
;

208 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

209 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

211 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

212 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_COLP
;

214 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

215 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

216 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

218 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

219 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

220 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

221 
	}
}

225 
	$mmi_SsTe°_31_1_4_1_1
( )

227 
Msg_t
 *
MsgPå
;

228 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

229 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

231 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

232 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_COLR
;

234 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

235 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

236 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

238 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

239 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

240 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

241 
	}
}

249 
	$mmi_SsTe°_31_2_1_1_1_A
( )

251 
u8
 
TBCD_Digô_1
 = 0;

252 
u8
 
TBCD_Digô_2
 = 0;

253 
u8
 
TBCD_Digô_3
 = 4;

254 
u8
 
TBCD_Digô_4
 = 3;

255 
u8
 
TBCD_Digô_5
 = 1;

256 
u8
 
TBCD_Digô_6
 = 2;

257 
u8
 
TBCD_Digô_7
 = 3;

258 
u8
 
TBCD_Digô_8
 = 4;

260 
Msg_t
 *
MsgPå
;

261 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

262 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

264 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Regi°î
;

266 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFNRY
;

269 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

270 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

271 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 5;

272 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[0] = 0xA8;

273 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[1] = (
TBCD_Digô_2
 << 4Ë| 
TBCD_Digô_1
;

274 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[2] = (
TBCD_Digô_4
 << 4Ë| 
TBCD_Digô_3
;

275 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[3] = (
TBCD_Digô_6
 << 4Ë| 
TBCD_Digô_5
;

276 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[4] = (
TBCD_Digô_8
 << 4Ë| 
TBCD_Digô_7
;

277 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

278 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
TRUE
;

279 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
noRïlyC⁄dôi⁄Time
 = 5;

281 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

282 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

283 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

285 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

286 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

287 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

288 
	}
}

293 
	$mmi_SsTe°_31_2_1_1_1_B
( )

295 
u8
 
TBCD_Digô_1
 = 0;

296 
u8
 
TBCD_Digô_2
 = 0;

297 
u8
 
TBCD_Digô_3
 = 4;

298 
u8
 
TBCD_Digô_4
 = 3;

299 
u8
 
TBCD_Digô_5
 = 1;

300 
u8
 
TBCD_Digô_6
 = 2;

301 
u8
 
TBCD_Digô_7
 = 3;

302 
u8
 
TBCD_Digô_8
 = 4;

304 
Msg_t
 *
MsgPå
;

305 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

306 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

309 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Regi°î
;

312 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFU
;

315 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

316 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_FAX_SERVICES
;

317 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 5;

318 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[0] = 0xA8;

319 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[1] = (
TBCD_Digô_2
 << 4Ë| 
TBCD_Digô_1
;

320 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[2] = (
TBCD_Digô_4
 << 4Ë| 
TBCD_Digô_3
;

321 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[3] = (
TBCD_Digô_6
 << 4Ë| 
TBCD_Digô_5
;

322 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbî
[4] = (
TBCD_Digô_8
 << 4Ë| 
TBCD_Digô_7
;

323 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

324 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

326 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

327 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

328 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

330 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

332 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

333 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

334 
	}
}

342 
	$mmi_SsTe°_31_2_1_2_1_A
( )

344 
Msg_t
 *
MsgPå
;

345 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

346 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

349 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Eøsuª
;

352 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFC
;

355 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

356 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_FAX_SERVICES
;

357 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

358 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

359 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

361 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

362 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

363 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

365 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

367 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

368 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

369 
	}
}

374 
	$mmi_SsTe°_31_2_1_2_1_B
( )

376 
Msg_t
 *
MsgPå
;

377 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

378 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

380 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Eøsuª
;

381 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFNRC
;

384 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

385 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

386 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

388 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

389 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

390 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

392 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
;

394 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

395 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

396 
	}
}

403 
	$mmi_SsTe°_31_2_1_3_A
()

405 
Msg_t
 *
MsgPå
 ;

406 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

407 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

409 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFA
;

410 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

413 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_BóªrSîvi˚Code
;

414 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ÆlSynchr⁄ousSîvi˚s
;

415 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

416 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

417 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

419 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

420 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

422 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

423 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

424 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

425 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

426 
	}
}

430 
	$mmi_SsTe°_31_2_1_3_B
()

432 
Msg_t
 *
MsgPå
 ;

433 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

434 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

436 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFU
;

437 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

440 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

441 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

442 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

443 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

445 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

446 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

448 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

449 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

450 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

451 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

452 
	}
}

459 
	$mmi_SsTe°_31_2_1_4_A
()

461 
Msg_t
 *
MsgPå
 ;

462 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

463 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

465 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFC
;

466 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

469 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

470 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

471 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

472 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

473 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

475 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

476 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

478 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

479 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

480 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

481 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

482 
	}
}

486 
	$mmi_SsTe°_31_2_1_4_B
()

488 
Msg_t
 *
MsgPå
 ;

489 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

490 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

492 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFNRC
;

493 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

496 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

497 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_FAX_SERVICES
;

498 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

499 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

500 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

502 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

503 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

505 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

506 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

507 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

508 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

509 
	}
}

516 
	$mmi_SsTe°_31_2_1_6_1_A
()

518 
Msg_t
 *
MsgPå
 ;

519 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

520 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

522 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFB
;

523 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

526 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

527 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

528 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

529 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

531 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

532 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

534 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

535 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

536 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

537 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

538 
	}
}

542 
	$mmi_SsTe°_31_2_1_6_1_B
()

544 
Msg_t
 *
MsgPå
 ;

545 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

546 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

548 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_CFNRY
;

549 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

552 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

553 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

554 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToNumbîLí
 = 0;

555 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
f‹w¨dedToSubaddªssLí
 = 0;

556 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlF‹w¨dögP¨ams
.
bNoRïlyC⁄dôi⁄TimePª£¡
 = 
FALSE
;

558 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

559 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

561 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

562 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

563 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

564 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

565 
	}
}

572 
	$mmi_SsTe°_31_8_1_1
()

574 
Msg_t
 *
MsgPå
 ;

575 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

576 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

578 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_AŒB¨rögSS
;

579 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Regi°îPassw‹d
;

580 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

582 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bPassw‹dPª£¡
 = 
TRUE
;

583 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[0] = '0';

584 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[1] = '0';

585 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[2] = '1';

586 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[3] = '2';

588 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bNewPassw‹dPª£¡
 = 
TRUE
;

589 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹d
[0] = '1';

590 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹d
[1] = '1';

591 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹d
[2] = '0';

592 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹d
[3] = '3';

594 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bNewPassw‹dAgaöPª£¡
 = 
TRUE
;

595 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹dAgaö
[0] = '1';

596 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹dAgaö
[1] = '1';

597 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹dAgaö
[2] = '0';

598 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_√wPassw‹dAgaö
[3] = '3';

600 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

601 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

603 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

604 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

605 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

606 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

607 
	}
}

610 
	$mmi_SsTe°_31_8_3_1_P¨tA
()

612 
Msg_t
 *
MsgPå
 ;

613 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

614 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

616 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_BAOC
;

617 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

619 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_BóªrSîvi˚Code
;

620 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ÆlSynchr⁄ousSîvi˚s
;

621 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bPassw‹dPª£¡
 = 
TRUE
;

622 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[0] = '1';

623 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[1] = '2';

624 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[2] = '3';

625 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[3] = '4';

627 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

628 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

630 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

631 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

632 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

633 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

634 
	}
}

637 
	$mmi_SsTe°_31_8_3_1_P¨tB
()

639 
Msg_t
 *
MsgPå
 ;

640 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

641 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

643 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_BIC_ROAM
;

644 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_A˘iv©e
;

646 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

647 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bPassw‹dPª£¡
 = 
TRUE
;

648 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[0] = '1';

649 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[1] = '2';

650 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[2] = '3';

651 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[3] = '4';

653 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

654 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

656 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

657 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

658 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

659 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

660 
	}
}

663 
	$mmi_SsTe°_31_8_4_1_P¨tA
()

665 
Msg_t
 *
MsgPå
 ;

666 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

667 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

669 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_AŒB¨rögSS
;

670 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

672 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

673 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_SPEECH_TELESERVICES
;

674 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bPassw‹dPª£¡
 = 
TRUE
;

675 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[0] = '1';

676 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[1] = '2';

677 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[2] = '3';

678 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[3] = '4';

680 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

681 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

683 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

684 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

685 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

686 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

687 
	}
}

690 
	$mmi_SsTe°_31_8_4_1_P¨tB
()

692 
Msg_t
 *
MsgPå
 ;

693 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

694 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

696 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_B¨rögOfOutgoögCÆls
;

697 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Dó˘iv©e
;

698 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Tñe£rvi˚Code
;

699 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚Code
 = 
API_SS_ALL_FAX_SERVICES
;

701 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
bPassw‹dPª£¡
 = 
TRUE
;

702 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[0] = '1';

703 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[1] = '2';

704 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[2] = '3';

705 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Passw‹d
[3] = '4';

707 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

708 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

710 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

711 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

712 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

713 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

714 
	}
}

717 
	$mmi_SsTe°_31_8_6_1_P¨tA
()

719 
Msg_t
 *
MsgPå
 ;

720 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

721 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

723 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_BAIC
;

724 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

725 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

727 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

728 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

730 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

731 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

732 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

733 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

734 
	}
}

737 
	$mmi_SsTe°_31_8_6_1_P¨tB
()

739 
Msg_t
 *
MsgPå
 ;

740 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

741 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

743 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_BOIC_ExHC
;

744 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_I¡îrog©e
;

745 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_CÆlB¨rögP¨ams
.
ss_Sîvi˚CodeC©eg‹y
 = 
ss_Sîvi˚codeNŸAµliˇbÀ
;

747 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

748 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

750 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

751 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

752 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

753 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

754 
	}
}

758 
	$mmi_SsTe°_31_9_1_1_P¨tA
()

760 
Msg_t
 *
MsgPå
 ;

761 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

762 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

764 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_USSD_V2
;

765 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Pro˚ssUn°ru˘uªdSSReque°
;

766 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDMesßgeTy≥
 = 
ss_Regi°îMesßgeTy≥
;

767 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDComp⁄ítTy≥
 = 
ss_USSDInvoke
;

768 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDD©aCodögScheme
 = 0x0F;

769 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåögLígth
 = 4;

770 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[0] = 42;

771 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[1] = 27;

772 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[2] = 108;

773 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[3] = 4;

775 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

776 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

778 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

779 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

780 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

781 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

782 
	}
}

784 
	$mmi_SsTe°_31_9_1_1_P¨tB
()

786 
Msg_t
 *
MsgPå
 ;

787 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

788 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

790 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_USSD_V2
;

791 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Pro˚ssUn°ru˘uªdSSReque°
;

792 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDMesßgeTy≥
 = 
ss_Regi°îMesßgeTy≥
;

793 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDComp⁄ítTy≥
 = 
ss_USSDInvoke
;

794 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDD©aCodögScheme
 = 0x0F;

795 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåögLígth
 = 7;

796 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[0] = 42;

797 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[1] = 25;

798 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[2] = 44;

799 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[3] = 166;

800 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[4] = 154;

801 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[5] = 213;

802 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[6] = 70;

804 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

805 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

807 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

808 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

809 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

810 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

811 
	}
}

813 
	$mmi_SsTe°_31_9_1_2_P¨tA
()

815 
Msg_t
 *
MsgPå
 ;

816 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

817 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

819 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_USSD_V2
;

820 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Pro˚ssUn°ru˘uªdSSReque°
;

821 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDMesßgeTy≥
 = 
ss_Regi°îMesßgeTy≥
;

822 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDComp⁄ítTy≥
 = 
ss_USSDInvoke
;

823 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDD©aCodögScheme
 = 0x0F;

824 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåögLígth
 = 11;

825 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[0] = 170;

826 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[1] = 27;

827 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[2] = 76;

828 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[3] = 101;

829 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[4] = 155;

830 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[5] = 213;

831 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[6] = 84;

832 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[7] = 53;

833 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[8] = 155;

834 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[9] = 108;

835 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDArgs
.
ss_USSDSåög
[10] = 4;

837 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

838 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

840 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

841 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

842 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

843 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

844 
	}
}

846 
	$mmi_SsTe°_31_9_1_2_P¨tB
()

848 
Msg_t
 *
MsgPå
 ;

849 
≠i_SsA˘i⁄Req_t
 
ss_A˘i⁄Req
;

850 
u16
 
Lí
 = –
≠i_SsA˘i⁄Req_t
 ) + –
MsgHód_t
 );

852 
ss_A˘i⁄Req
.
ss_Code
 = 
ss_USSD_V1
;

853 
ss_A˘i⁄Req
.
ss_O≥øti⁄
 = 
ss_Pro˚ssUn°ru˘uªdSSD©a
;

854 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDMesßgeTy≥
 = 
ss_Regi°îMesßgeTy≥
;

855 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDComp⁄ítTy≥
 = 
ss_USSDInvoke
;

856 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5SåögLígth
 = 12;

857 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[0] = 42;

858 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[1] = 55;

859 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[2] = 48;

860 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[3] = 42;

861 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[4] = 54;

862 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[5] = 51;

863 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[6] = 53;

864 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[7] = 42;

865 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[8] = 53;

866 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[9] = 54;

867 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[10] = 50;

868 
ss_A˘i⁄Req
.
ss_P¨ams
.
ss_USSDP¨ams
.
ss_USSDP¨amSñ
.
ss_USSDU£rD©a
.
ss_IA5Såög
[11] = 35;

870 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(2), "<SS_ACTION_REQ> sent by API\n\tOp: 0x%x, Code: 0x%x\n",

871 (
u8
)
ss_A˘i⁄Req
.
ss_O≥øti⁄
, (u8)ss_A˘i⁄Req.
ss_Code
 );

873 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

874 
MsgPå
->
H
.
Id
 = 
API_SS_ACTION_REQ
 ;

875 
MsgPå
->
B
.
ApiSsA˘i⁄Req
 = 
ss_A˘i⁄Req
;

876 
	`sxr_Síd
 (
MsgPå
, 
API_MBX
, 
SXR_SEND_MSG
);

877 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_ver.c

33 
	~"rk_ty≥s.h
"

34 
	~"vî_mgmt.h
"

36 
	#__MMI_VER_C__


	)

37 
	~"mmi_vî.h
"

38 #unde‡
__MMI_VER_C__


40 * 
	gmmi_vî_Så
 = "Micro MMI 2012.11.06";

42 
bb_Vîsi⁄_t
 
	gmmi_vî
;

53 
	$mmi_RegVîsi⁄
()

55 
mmi_vî
.
vî_°rög
 = 
mmi_vî_Så
;

56 
mmi_vî
.
buûd_d©e
 = 
mmi_Now
;

57 
mmi_vî
.
svn_ªvisi⁄
 = 
mmi_Revisi⁄
;

58 
mmi_vî
.
svn_uæ
 = 
mmi_Uæ
;

60 
	`vî_Regi°îModuÀ
(
BB_MODULE_ID_MMI
, &
mmi_vî
);

61 
	}
}

	@D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_voice.c

29 
	~"sxr_›s.h
"

30 
	~"sxs_io.h
"

31 
	~"sxs_lib.h
"

34 
	~"mmi_msg.h
"

35 
	~"ôf_msg.h
"

36 
	~"hÆ_mdrv.h
"

38 
	~"mmi_voi˚.h
"

39 
	~"voc_èsk.h
"

40 
	~"wav.h
"

42 
	#MMI_DEFAULT_VOLUME
 16

	)

43 
	#MMI_DEFAULT_GAIN
 3

	)

46 
	$∂ayMusicCÆlback
()

48 
	`hÆ_VocSèπ
(
VOC_TX
, (
uöt32
)
wav
, (wav), 
∂ayMusicCÆlback
);

49 
	}
}

51 
	$mmi_SèπPœyMusic
()

53 
	`sxs_Ârötf
–
_MMI
, "StartÅoÖlay music\n");

55 
	`hÆ_Voi˚O≥n
();

56 
	`hÆ_Voi˚SëVﬁume
(
MMI_DEFAULT_VOLUME
);

58 
	`hÆ_Voi˚UnMuã
();

59 
	`hÆ_VocSèπ
(
VOC_TX
, (
uöt32
)
wav
, (wav), 
∂ayMusicCÆlback
);

60 
	}
}

63 
	$mmi_St›PœyMusic
()

65 
	`sxs_Ârötf
–
_MMI
, "StopÅoÖlay music\n");

67 
	`hÆ_VocSt›
(
VOC_TX
);

68 
	`hÆ_Voi˚Clo£
();

69 
	}
}

74 
	$∂ayAÀπCÆlback
()

76 
	`hÆ_VocSèπ
(
VOC_TX
, (
uöt32
)
wav
, (wav), 
∂ayAÀπCÆlback
);

77 
	}
}

79 
	$mmi_SèπPœyAÀπ
()

81 
	`sxs_Ârötf
–
_MMI
, "StartÅoÖlayálert\n");

82 
	`hÆ_Voi˚O≥n
();

83 
	`hÆ_Voi˚SëVﬁume
(
MMI_DEFAULT_VOLUME
);

85 
	`hÆ_Voi˚UnMuã
();

86 
	`hÆ_VocSèπ
(
VOC_TX
, (
uöt32
)
wav
, (wav), 
∂ayAÀπCÆlback
);

87 
	}
}

89 
	$mmi_St›PœyAÀπ
()

91 
	`sxs_Ârötf
–
_MMI
, "StopÅoÖlayálert\n");

93 
	`hÆ_VocSt›
(
VOC_TX
);

94 
	}
}

106 
	$mmi_audioCÆlSèπ
()

108 
	`hÆ_Voi˚O≥n
();

110 
	`hÆ_Voi˚SëVﬁume
(
MMI_DEFAULT_VOLUME
);

111 
	`hÆ_Voi˚SëGaö
(
MMI_DEFAULT_GAIN
);

113 
	`hÆ_Voi˚UnMuã
();

115 
	`sxs_Ârötf
–
_MMI
, "Voice start *****!\n");

119 
	}
}

131 
	$mmi_audioCÆlSt›
 ()

133 
	`hÆ_VocSt›
(
VOC_RX
);

134 
	`hÆ_VocSt›
(
VOC_TX
);

136 
	`hÆ_Voi˚Clo£
();

137 
	`sxs_Ârötf
–
_MMI
, "Voice stop *****!\n");

139 
	}
}

152 
	$mmi_audioOn
 ( )

154 
Msg_t
 * 
MsgPå
 ;

155 
u16
 
Lí
 = –
Msg_t
 );

157 
MsgPå
 = 
	`sxr_MÆloc
 (
Lí
);

159 
MsgPå
->
H
.
Id
 = 
VOC_AUDIOON_REQ
;

160 
	`sxs_Ârötf
–
_MMI
, "MMI send VOC_AUDIOON_REQÅo VOC \n");

162 
	`sxr_Síd
 (
MsgPå
, 
VOC_MBX
, 
SXR_SEND_MSG
);

163 
	}
}

175 
	$mmi_audioSëVﬁume
 (
u32
 
vﬁume
)

177 
	`hÆ_Voi˚SëVﬁume
(
vﬁume
);

179 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(1), "Voi˚ Vﬁumê£àtÿ%d *****!\n", 
vﬁume
);

180 
	}
}

192 
	$mmi_audioSëVoi˚Muã
 ()

194 
	`hÆ_Voi˚Muã
();

196 
	`sxs_Ârötf
–
_MMI
, "Voice Mute *****!\n");

197 
	}
}

209 
	$mmi_audioSëVoi˚UnMuã
 ()

211 
	`hÆ_Voi˚UnMuã
();

213 
	`sxs_Ârötf
–
_MMI
, "Voice UnMute *****!\n");

214 
	}
}

227 
	$mmi_audioSëVoi˚Gaö
 (
u32
 
gaö
)

229 
	`hÆ_Voi˚SëGaö
(
gaö
);

231 
	`sxs_Ârötf
–
_MMI
|
	`TNB_ARG
(1), "Voi˚ Gaö SëÅÿ%d *****!\n", 
gaö
);

232 
	}
}

	@
1
.
0
15
1436
D:\Projects\modem2.5g\branches\protocol\INTEGR~1\navi\test\stack\MICRO_~1\mmi\src\MMI_CA~2.MIN
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_call.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_cb.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_misc.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_mm.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_plmn.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_rr.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_scen.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_sim.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_sm.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_snd.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_ss.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_ver.c
D:\Projects\modem2.5g\branches\protocol\integration\navi\test\stack\micro_mmi\mmi\src\mmi_voice.c
